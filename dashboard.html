<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ูพูู ฺฉุงุฑุจุฑ | OdooMaster</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;500;600;700;800;900&family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/liara-theme.css">
    <link rel="stylesheet" href="css/animations.css">
    <link rel="stylesheet" href="css/dashboard.css">
    <link rel="stylesheet" href="css/components.css">
    <script>
        // Apply theme immediately (dashboard styles + main.css variables rely on body.light-theme)
        if (localStorage.getItem('theme') === 'light') {
            document.documentElement.classList.add('light-theme');
        }
    </script>
</head>
<body class="dashboard-page liara-theme">
    <script>
        if (localStorage.getItem('theme') === 'light') {
            document.body.classList.add('light-theme');
        }
    </script>
    <!-- Sidebar Overlay for Mobile -->
    <div class="sidebar-overlay" id="sidebarOverlay"></div>
    
    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <a href="index.html" class="logo">
                <div class="logo-icon">
                    <i class="fas fa-cube"></i>
                </div>
                <span class="logo-text">Odoo<strong>Master</strong></span>
            </a>
            <button class="sidebar-toggle" id="sidebarToggle">
                <i class="fas fa-bars"></i>
            </button>
        </div>

        <nav class="sidebar-nav">
            <div class="nav-section">
                <span class="nav-section-title" data-i18n="dashboard.mainMenu">ููู ุงุตู</span>
                <a href="dashboard.html" class="nav-item active">
                    <i class="fas fa-home"></i>
                    <span data-i18n="dashboard.dashboard">ุฏุงุดุจูุฑุฏ</span>
                </a>
                <a href="#licenses" class="nav-item">
                    <i class="fas fa-key"></i>
                    <span data-i18n="nav.licenses">ูุงุณูุณโูุง</span>
                    <span class="nav-badge" id="licensesBadge">ฐ</span>
                </a>
                <a href="#downloads" class="nav-item">
                    <i class="fas fa-download"></i>
                    <span data-i18n="nav.downloads">ุฏุงูููุฏ ูุตุงุจ</span>
                </a>
                <a href="payment.html" class="nav-item">
                    <i class="fas fa-shopping-cart"></i>
                    <span data-i18n="nav.buyLicense">ุฎุฑุฏ ูุงุณูุณ</span>
                </a>
            </div>

            <!-- Admin Section (Visible only for admins) -->
            <div class="nav-section" id="adminNavSection" style="display: none;">
                <span class="nav-section-title" data-i18n="dashboard.management">ูุฏุฑุช</span>
                <a href="#admin" class="nav-item admin-link" id="adminNavLink">
                    <i class="fas fa-shield-alt"></i>
                    <span data-i18n="dashboard.adminPanel">ูพูู ูุฏุฑุช</span>
                </a>
            </div>
        </nav>

        <div class="sidebar-footer">
            <div class="user-card">
                <div class="user-avatar">
                    <img src="https://ui-avatars.com/api/?name=ฺฉุงุฑุจุฑ+ุชุณุช&background=714B67&color=fff" alt="User">
                    <span class="status-dot online"></span>
                </div>
                <div class="user-info">
                    <strong>ฺฉุงุฑุจุฑ ุชุณุช</strong>
                    <span>ูพูู ุญุฑููโุง</span>
                </div>
                <button class="logout-btn" title="ุฎุฑูุฌ">
                    <i class="fas fa-sign-out-alt"></i>
                </button>
            </div>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Top Bar -->
        <header class="topbar">
            <div class="topbar-right">
                <button class="mobile-menu-btn" id="mobileMenuBtn">
                    <i class="fas fa-bars"></i>
                </button>
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" data-i18n-placeholder="dashboard.search" placeholder="Search...">
                </div>
            </div>
            <div class="topbar-left">
                <div class="lang-switcher-topbar" id="langSwitcherTopbar">
                    <!-- Language switcher will be inserted here by JS -->
                </div>
                <button class="topbar-btn" id="notifBtn">
                    <i class="fas fa-bell"></i>
                    <span class="notif-badge">3</span>
                </button>
                <button class="topbar-btn" id="themeBtn" title="Toggle Theme">
                    <i class="fas fa-moon"></i>
                </button>
            </div>
        </header>

        <!-- Dashboard Content -->
        <div class="dashboard-content">
            <!-- Welcome Banner -->
            <div class="welcome-banner glass">
                <div class="welcome-content">
                    <h1><span data-i18n="dashboard.hello">ุณูุงูุ</span> <span class="gradient-text" id="userName">ฺฉุงุฑุจุฑ ุนุฒุฒ</span> ๐</h1>
                    <p data-i18n="dashboard.welcomeText">Welcome! Use your dashboard to manage licenses and download the installer.</p>
                </div>
                <div class="welcome-illustration">
                    <div class="illustration-circle"></div>
                    <i class="fas fa-rocket"></i>
                </div>
            </div>

            <!-- Stats Cards -->
            <div class="stats-grid">
                <div class="stat-card glass">
                    <div class="stat-icon blue">
                        <i class="fas fa-key"></i>
                    </div>
                    <div class="stat-info">
                        <span class="stat-value" id="statActiveLicenses">-</span>
                        <span class="stat-label" data-i18n="dashboard.activeLicenses">ูุงุณูุณ ูุนุงู</span>
                    </div>
                </div>
                <div class="stat-card glass">
                    <div class="stat-icon green">
                        <i class="fas fa-download"></i>
                    </div>
                    <div class="stat-info">
                        <span class="stat-value" id="statDownloads">-</span>
                        <span class="stat-label" data-i18n="dashboard.downloads">ุฏุงูููุฏ</span>
                    </div>
                </div>
                <div class="stat-card glass">
                    <div class="stat-icon orange">
                        <i class="fas fa-clock"></i>
                    </div>
                    <div class="stat-info">
                        <span class="stat-value" id="statDaysRemaining">-</span>
                        <span class="stat-label" data-i18n="dashboard.daysRemaining">ุฑูุฒ ุจุงููุงูุฏู</span>
                    </div>
                </div>
                <div class="stat-card glass">
                    <div class="stat-icon purple">
                        <i class="fas fa-headset"></i>
                    </div>
                    <div class="stat-info">
                        <span class="stat-value" id="statTickets">ฐ</span>
                        <span class="stat-label" data-i18n="dashboard.openTickets">ุชฺฉุช ุจุงุฒ</span>
                    </div>
                </div>
            </div>

            <!-- Main Grid -->
            <div class="dashboard-grid">
                <!-- System Check & Install Section -->
                <div class="card glass system-check-card" style="grid-column: 1 / -1;">
                    <div class="card-header">
                        <h3><i class="fas fa-stethoscope"></i> <span data-i18n="dashboard.systemCheck">ุชุณุช ุณุณุชู ู ูุตุจ ูุงุฒููุฏโูุง</span></h3>
                        <div class="header-actions">
                            <button class="btn btn-ghost btn-sm" id="openGuideBtn" title="ุฑุงูููุง ูุตุจ">
                                <i class="fas fa-question-circle"></i>
                                <span>ุฑุงูููุง</span>
                            </button>
                            <span class="section-badge" id="systemStatus" data-i18n="dashboard.readyToTest">ุขูุงุฏู ุชุณุช</span>
                        </div>
                    </div>
                    <p style="color: var(--text-secondary); margin-bottom: 20px;" data-i18n="dashboard.systemCheckDesc">
                        ูุจู ุงุฒ ูุตุจ Odooุ ุณุณุชู ุดูุง ุจุฑุฑุณ ูโุดูุฏ ู ูุงุฒููุฏโูุง ูุงููุฌูุฏ ุงุฒ ููุงุจุน ุฑุณู ุฏุงูููุฏ ู ูุตุจ ูโุดููุฏ.
                    </p>
                    
                    <!-- New Premium System Check UI -->
                    <div class="system-check-container" id="systemCheckContainer">
                        <div class="check-grid-premium" id="systemCheckGrid">
                            <div class="check-card-premium" data-check="os">
                                <div class="check-card-icon">
                                    <i class="fas fa-desktop"></i>
                                    <div class="check-pulse"></div>
                                </div>
                                <div class="check-card-content">
                                    <h4>ุณุณุชู ุนุงูู</h4>
                                    <p class="check-version">Windows 10/11 64-bit</p>
                                </div>
                                <div class="check-card-status">
                                    <span class="status-text">ุฏุฑ ุงูุชุธุงุฑ...</span>
                                    <div class="status-icon">
                                        <i class="fas fa-hourglass-half"></i>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="check-card-premium" data-check="python">
                                <div class="check-card-icon python">
                                    <i class="fab fa-python"></i>
                                    <div class="check-pulse"></div>
                                </div>
                                <div class="check-card-content">
                                    <h4>Python 3.11</h4>
                                    <p class="check-version">python.org</p>
                                </div>
                                <div class="check-card-status">
                                    <span class="status-text">ุฏุฑ ุงูุชุธุงุฑ...</span>
                                    <div class="status-icon">
                                        <i class="fas fa-hourglass-half"></i>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="check-card-premium" data-check="postgresql">
                                <div class="check-card-icon postgresql">
                                    <i class="fas fa-database"></i>
                                    <div class="check-pulse"></div>
                                </div>
                                <div class="check-card-content">
                                    <h4>PostgreSQL 16</h4>
                                    <p class="check-version">postgresql.org</p>
                                </div>
                                <div class="check-card-status">
                                    <span class="status-text">ุฏุฑ ุงูุชุธุงุฑ...</span>
                                    <div class="status-icon">
                                        <i class="fas fa-hourglass-half"></i>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="check-card-premium" data-check="git">
                                <div class="check-card-icon git">
                                    <i class="fab fa-git-alt"></i>
                                    <div class="check-pulse"></div>
                                </div>
                                <div class="check-card-content">
                                    <h4>Git</h4>
                                    <p class="check-version">git-scm.com</p>
                                </div>
                                <div class="check-card-status">
                                    <span class="status-text">ุฏุฑ ุงูุชุธุงุฑ...</span>
                                    <div class="status-icon">
                                        <i class="fas fa-hourglass-half"></i>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="check-card-premium" data-check="nodejs">
                                <div class="check-card-icon nodejs">
                                    <i class="fab fa-node-js"></i>
                                    <div class="check-pulse"></div>
                                </div>
                                <div class="check-card-content">
                                    <h4>Node.js LTS</h4>
                                    <p class="check-version">nodejs.org</p>
                                </div>
                                <div class="check-card-status">
                                    <span class="status-text">ุฏุฑ ุงูุชุธุงุฑ...</span>
                                    <div class="status-icon">
                                        <i class="fas fa-hourglass-half"></i>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="check-card-premium" data-check="vcredist">
                                <div class="check-card-icon vcredist">
                                    <i class="fas fa-cogs"></i>
                                    <div class="check-pulse"></div>
                                </div>
                                <div class="check-card-content">
                                    <h4>VC++ Redistributable</h4>
                                    <p class="check-version">microsoft.com</p>
                                </div>
                                <div class="check-card-status">
                                    <span class="status-text">ุฏุฑ ุงูุชุธุงุฑ...</span>
                                    <div class="status-icon">
                                        <i class="fas fa-hourglass-half"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Error/Warning Details Panel -->
                        <div class="check-details-panel" id="checkDetailsPanel" style="display: none;">
                            <div class="details-header">
                                <i class="fas fa-info-circle"></i>
                                <h4>ุฌุฒุฆุงุช ู ุฑุงูโุญูโูุง</h4>
                            </div>
                            <div class="details-content" id="checkDetailsContent">
                                <!-- Dynamic content will be inserted here -->
                            </div>
                        </div>
                    </div>
                    
                    <div class="action-buttons-premium" style="margin-top: 24px;">
                        <button class="btn btn-primary btn-glow btn-lg" id="startSystemCheck">
                            <i class="fas fa-search"></i>
                            <span data-i18n="dashboard.startSystemCheck">ุดุฑูุน ุจุฑุฑุณ ุณุณุชู</span>
                        </button>
                        <button class="btn btn-success btn-lg" id="installMissing" style="display: none;">
                            <i class="fas fa-download"></i>
                            <span data-i18n="dashboard.installMissing">ูุตุจ ูุงุฒููุฏโูุง</span>
                        </button>
                        <button class="btn btn-outline btn-lg" id="openGuideBtn2" style="display: none;">
                            <i class="fas fa-book"></i>
                            <span>ูุดุงูุฏู ุฑุงูููุง</span>
                        </button>
                    </div>
                </div>

                <!-- Quick Actions -->
                <div class="card glass quick-actions">
                    <div class="card-header">
                        <h3><i class="fas fa-bolt"></i> <span data-i18n="dashboard.quickAccess">ุฏุณุชุฑุณ ุณุฑุน</span></h3>
                    </div>
                    <div class="actions-grid">
                        <a href="#downloads" class="action-btn">
                            <div class="action-icon blue">
                                <i class="fas fa-download"></i>
                            </div>
                            <span data-i18n="dashboard.downloadInstaller">ุฏุงูููุฏ ูุตุงุจ</span>
                        </a>
                        <a href="#licenses" class="action-btn">
                            <div class="action-icon green">
                                <i class="fas fa-plus"></i>
                            </div>
                            <span data-i18n="dashboard.buyLicense">ุฎุฑุฏ ูุงุณูุณ</span>
                        </a>
                        <a href="#" class="action-btn disabled-link" aria-disabled="true" tabindex="-1" title="ุจูโุฒูุฏ ูุนุงู ูโุดูุฏ">
                            <div class="action-icon orange">
                                <i class="fas fa-comment-dots"></i>
                            </div>
                            <span data-i18n="dashboard.sendTicket">ุงุฑุณุงู ุชฺฉุช</span>
                        </a>
                        <a href="#" class="action-btn">
                            <div class="action-icon purple">
                                <i class="fas fa-book"></i>
                            </div>
                            <span data-i18n="dashboard.documentation">ูุณุชูุฏุงุช</span>
                        </a>
                    </div>
                </div>

                <!-- Active Licenses - Full Management Section -->
                <div class="card glass licenses-card" id="licenses" style="grid-column: 1 / -1;">
                    <div class="card-header">
                        <h3><i class="fas fa-key"></i> <span data-i18n="dashboard.activeLicensesTitle">ูุงุณูุณโูุง ูู</span></h3>
                        <a href="payment.html" class="btn btn-primary btn-sm" style="font-size: 0.85rem;">
                            <i class="fas fa-shopping-cart"></i> 
                            <span data-i18n="licenses.buyLicense">ุฎุฑุฏ ูุงุณูุณ</span>
                        </a>
                    </div>
                    <p style="color: var(--text-secondary); margin-bottom: 16px; font-size: 0.9rem;">
                        <span data-i18n="licenses.note">ุจุฑุง ุฏุงูููุฏ ูุงูโูุงุ ุจุงุฏ ูุงุณูุณ ุบุฑ Trial ูุนุงู ุฏุงุดุชู ุจุงุดุฏ.</span>
                    </p>
                    <div id="licensesListDashboard" style="display: grid; gap: 14px;">
                        <!-- Licenses will be loaded dynamically -->
                        <div style="text-align: center; padding: 30px; color: var(--gray-light);">
                            <i class="fas fa-spinner fa-spin" style="font-size: 2rem; margin-bottom: 12px;"></i>
                            <p data-i18n="dashboard.loading">ุฏุฑ ุญุงู ุจุงุฑฺฏุฐุงุฑ...</p>
                        </div>
                    </div>
                </div>

                <!-- Admin Panel (Embedded) -->
                <div class="card glass" id="admin" style="display: none; padding: 0; overflow: hidden;">
                    <div class="card-header" style="padding: 18px 18px 0 18px; margin-bottom: 12px;">
                        <h3><i class="fas fa-shield-alt"></i> ูพูู ูุฏุฑุช</h3>
                        <a href="#" class="card-link" id="closeAdminPanel">ุจุณุชู</a>
                    </div>
                    <div style="padding: 0 18px 18px 18px;">
                        <iframe
                            id="adminPanelFrame"
                            title="Admin Panel"
                            src="admin.html"
                            style="width: 100%; height: 75vh; border: 0; border-radius: 14px; background: transparent;"
                            loading="lazy"
                        ></iframe>
                    </div>
                </div>

                <!-- Download Section -->
                <div class="card glass download-card" id="downloads">
                    <div class="card-header">
                        <h3><i class="fas fa-download"></i> <span data-i18n="dashboard.downloadInstaller">ุฏุงูููุฏ ูุตุงุจ</span></h3>
                    </div>
                    <div class="download-content">
                        <!-- Step by Step Guide -->
                        <div class="download-steps">
                            <h4 style="color: var(--primary); margin-bottom: 16px; font-size: 1rem;">
                                <i class="fas fa-route"></i> ูุฑุงุญู ูุตุจ ู ูุนุงูโุณุงุฒ
                            </h4>
                            <div class="step-list" style="display: flex; flex-direction: column; gap: 12px; margin-bottom: 20px;">
                                <div class="step-item" style="display: flex; align-items: flex-start; gap: 12px; padding: 12px; background: rgba(56, 189, 248, 0.1); border-radius: 10px; border-right: 3px solid var(--primary);">
                                    <div class="step-number" style="width: 28px; height: 28px; background: var(--primary); color: #000; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; flex-shrink: 0;">ฑ</div>
                                    <div class="step-content">
                                        <strong style="color: var(--white);">ูุตุงุจ ุฑุง ุฏุงูููุฏ ู Unblock ฺฉูุฏ</strong>
                                        <p style="color: var(--gray-light); font-size: 0.85rem; margin: 4px 0 0 0;">
                                            ุฑู ูุงู ZIP ุฑุงุณุชโฺฉูฺฉ โ Properties โ ุชฺฉ <b>Unblock</b> โ OK โ ุณูพุณ Extract ฺฉูุฏ.
                                        </p>
                                    </div>
                                </div>
                                <div class="step-item" style="display: flex; align-items: flex-start; gap: 12px; padding: 12px; background: rgba(56, 189, 248, 0.05); border-radius: 10px; border-right: 3px solid var(--gray);">
                                    <div class="step-number" style="width: 28px; height: 28px; background: var(--gray); color: #000; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; flex-shrink: 0;">ฒ</div>
                                    <div class="step-content">
                                        <strong style="color: var(--white);">ูุตุงุจ ุฑุง ุงุฌุฑุง ฺฉูุฏ</strong>
                                        <p style="color: var(--gray-light); font-size: 0.85rem; margin: 4px 0 0 0;">ูุงู <code style="background: rgba(255,255,255,0.1); padding: 2px 6px; border-radius: 4px;">start_ui_online.bat</code> ุฑุง ุงุฌุฑุง ฺฉูุฏ. ุดูุงุณู ุฑุงุงูู ููุงุด ุฏุงุฏู ูโุดูุฏ.</p>
                                    </div>
                                </div>
                                <div class="step-item" style="display: flex; align-items: flex-start; gap: 12px; padding: 12px; background: rgba(56, 189, 248, 0.05); border-radius: 10px; border-right: 3px solid var(--gray);">
                                    <div class="step-number" style="width: 28px; height: 28px; background: var(--gray); color: #000; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; flex-shrink: 0;">ณ</div>
                                    <div class="step-content">
                                        <strong style="color: var(--white);">ุดูุงุณู ุฑุงุงูู ุฑุง ฺฉูพ ู ูุงุณูุณ ุจุฎุฑุฏ</strong>
                                        <p style="color: var(--gray-light); font-size: 0.85rem; margin: 4px 0 0 0;">ุงุฒ ุจุฎุด ยซุฎุฑุฏ ูุงุณูุณยป ุจุง ุดูุงุณู ุฑุงุงููุ ูุงู ูุงุณูุณ (.oml) ุฏุฑุงูุช ฺฉูุฏ.</p>
                                    </div>
                                </div>
                                <div class="step-item" style="display: flex; align-items: flex-start; gap: 12px; padding: 12px; background: rgba(56, 189, 248, 0.05); border-radius: 10px; border-right: 3px solid var(--gray);">
                                    <div class="step-number" style="width: 28px; height: 28px; background: var(--gray); color: #000; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; flex-shrink: 0;">ด</div>
                                    <div class="step-content">
                                        <strong style="color: var(--white);">Odoo ุฑุง ูุตุจ ฺฉูุฏ!</strong>
                                        <p style="color: var(--gray-light); font-size: 0.85rem; margin: 4px 0 0 0;">ูุงู ูุงุณูุณ ุฑุง ฺฉูุงุฑ ูุตุงุจ ุจฺฏุฐุงุฑุฏ ู ูุตุจ ุฑุง ุดุฑูุน ฺฉูุฏ.</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="download-info">
                            <div class="download-icon">
                                <i class="fas fa-cube"></i>
                            </div>
                            <div class="download-details">
                                <strong>OdooMaster Installer v2.0</strong>
                                <span>Windows 64-bit โข ~130 KB (ูุณุฎู ุขููุงู)</span>
                            </div>
                        </div>
                        <div class="download-meta">
                            <div class="meta-item" style="color: var(--success);">
                                <i class="fas fa-check-circle"></i>
                                <span>ุฏุงูููุฏ ุฑุงฺฏุงู - ุจุฏูู ูุงุฒ ุจู ูุงุณูุณ</span>
                            </div>
                            <div class="meta-item">
                                <i class="fas fa-code-branch"></i>
                                Odoo 19 Community
                            </div>
                        </div>
                        <button class="btn btn-primary btn-block btn-glow download-btn" id="downloadBtn">
                            <i class="fas fa-download"></i>
                            <span>ุฏุงูููุฏ ุฑุงฺฏุงู ูุตุงุจ</span>
                        </button>
                        <div class="download-progress" id="downloadProgress">
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 0%"></div>
                            </div>
                            <span class="progress-text" data-i18n="dashboard.preparing">ุฏุฑ ุญุงู ุขูุงุฏูโุณุงุฒ...</span>
                        </div>
                    </div>
                </div>

                <!-- Recent Activity -->
                <div class="card glass activity-card">
                    <div class="card-header">
                        <h3><i class="fas fa-history"></i> <span data-i18n="dashboard.recentActivity">ูุนุงูุชโูุง ุงุฎุฑ</span></h3>
                    </div>
                    <div class="activity-list">
                        <div class="activity-item">
                            <div class="activity-icon green">
                                <i class="fas fa-check"></i>
                            </div>
                            <div class="activity-content">
                                <strong>ูุงุณูุณ ูุนุงู ุดุฏ</strong>
                                <span>ูพูู ุญุฑููโุง ุจุง ููููุช ูุนุงู ุดุฏ</span>
                            </div>
                            <span class="activity-time">ฒ ุณุงุนุช ูพุด</span>
                        </div>
                        <div class="activity-item">
                            <div class="activity-icon blue">
                                <i class="fas fa-download"></i>
                            </div>
                            <div class="activity-content">
                                <strong>ุฏุงูููุฏ ูุตุงุจ</strong>
                                <span>ูุณุฎู ฒ.ฐ ุฏุงูููุฏ ุดุฏ</span>
                            </div>
                            <span class="activity-time">ุฏุฑูุฒ</span>
                        </div>
                        <div class="activity-item">
                            <div class="activity-icon orange">
                                <i class="fas fa-credit-card"></i>
                            </div>
                            <div class="activity-content">
                                <strong>ูพุฑุฏุงุฎุช ูููู</strong>
                                <span>ดนฐ,ฐฐฐ ุชููุงู</span>
                            </div>
                            <span class="activity-time">ณ ุฑูุฒ ูพุด</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Gamification Section -->
            <div class="gamification-section">
                <div class="card glass achievements-card">
                    <div class="card-header">
                        <h3><i class="fas fa-trophy"></i> <span data-i18n="dashboard.achievements">ุฏุณุชุงูุฑุฏูุง</span></h3>
                        <span class="achievement-count">3/12</span>
                    </div>
                    <div class="achievements-grid">
                        <div class="achievement unlocked">
                            <div class="achievement-icon">
                                <i class="fas fa-user-plus"></i>
                            </div>
                            <span data-i18n="dashboard.firstStep">ุงููู ูุฏู</span>
                        </div>
                        <div class="achievement unlocked">
                            <div class="achievement-icon">
                                <i class="fas fa-download"></i>
                            </div>
                            <span data-i18n="dashboard.firstDownload">ุงููู ุฏุงูููุฏ</span>
                        </div>
                        <div class="achievement unlocked">
                            <div class="achievement-icon">
                                <i class="fas fa-key"></i>
                            </div>
                            <span data-i18n="dashboard.licenseHolder">ูุงุณูุณโุฏุงุฑ</span>
                        </div>
                        <div class="achievement locked">
                            <div class="achievement-icon">
                                <i class="fas fa-star"></i>
                            </div>
                            <span>VIP</span>
                        </div>
                        <div class="achievement locked">
                            <div class="achievement-icon">
                                <i class="fas fa-users"></i>
                            </div>
                            <span data-i18n="dashboard.referrer">ูุนุฑู</span>
                        </div>
                        <div class="achievement locked">
                            <div class="achievement-icon">
                                <i class="fas fa-crown"></i>
                            </div>
                            <span data-i18n="dashboard.legendary">ุงูุณุงููโุง</span>
                        </div>
                    </div>
                </div>

                <div class="card glass level-card">
                    <div class="level-header">
                        <div class="level-badge">
                            <i class="fas fa-medal"></i>
                            <span><span data-i18n="dashboard.level">ุณุทุญ</span> 3</span>
                        </div>
                        <div class="xp-info">
                            <strong>750 XP</strong>
                            <span><span data-i18n="dashboard.toNextLevel">ุชุง ุณุทุญ ุจุนุฏ:</span> 250 XP</span>
                        </div>
                    </div>
                    <div class="level-progress">
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 75%"></div>
                        </div>
                    </div>
                    <div class="level-rewards">
                        <span data-i18n="dashboard.nextLevelReward">ูพุงุฏุงุด ุณุทุญ ุจุนุฏ:</span>
                        <div class="reward-preview">
                            <i class="fas fa-gift"></i>
                            <span data-i18n="dashboard.discount10">10% ุชุฎูู ุฎุฑุฏ ุจุนุฏ</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Notification Panel -->
    <div class="notification-panel" id="notifPanel">
        <div class="notif-header">
            <h4 data-i18n="dashboard.notifications">ุงุนูุงูโูุง</h4>
            <button class="mark-read" data-i18n="dashboard.markAllRead">ููู ุฎูุงูุฏู ุดุฏ</button>
        </div>
        <div class="notif-list">
            <div class="notif-item unread">
                <div class="notif-icon green">
                    <i class="fas fa-check-circle"></i>
                </div>
                <div class="notif-content">
                    <strong>ูุตุจ ูููู!</strong>
                    <p>Odoo ุจุง ููููุช ูุตุจ ุดุฏ</p>
                    <span class="notif-time">ต ุฏููู ูพุด</span>
                </div>
            </div>
            <div class="notif-item unread">
                <div class="notif-icon blue">
                    <i class="fas fa-gift"></i>
                </div>
                <div class="notif-content">
                    <strong>ูุฏู ูฺู!</strong>
                    <p>ท ุฑูุฒ ุงุดุชุฑุงฺฉ ุฑุงฺฏุงู ูุนุงู ุดุฏ</p>
                    <span class="notif-time">ฑ ุณุงุนุช ูพุด</span>
                </div>
            </div>
            <div class="notif-item">
                <div class="notif-icon orange">
                    <i class="fas fa-sync"></i>
                </div>
                <div class="notif-content">
                    <strong>ุจุฑูุฒุฑุณุงู ุฌุฏุฏ</strong>
                    <p>ูุณุฎู ฒ.ฑ ููุชุดุฑ ุดุฏ</p>
                    <span class="notif-time">ุฏุฑูุฒ</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Installation Guide Modal -->
    <div class="guide-modal-overlay" id="guideModal">
        <div class="guide-modal glass">
            <div class="guide-modal-header">
                <div class="guide-modal-title">
                    <i class="fas fa-book-open"></i>
                    <h2>ุฑุงูููุง ฺฉุงูู ูุตุจ Odoo</h2>
                </div>
                <button class="guide-modal-close" id="closeGuideModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="guide-modal-body">
                <!-- Guide Navigation -->
                <div class="guide-nav">
                    <button class="guide-nav-btn active" data-section="intro">
                        <i class="fas fa-play-circle"></i>
                        <span>ุดุฑูุน</span>
                    </button>
                    <button class="guide-nav-btn" data-section="download">
                        <i class="fas fa-download"></i>
                        <span>ุฏุงูููุฏ</span>
                    </button>
                    <button class="guide-nav-btn" data-section="systemcheck">
                        <i class="fas fa-stethoscope"></i>
                        <span>ฺฺฉ ุณุณุชู</span>
                    </button>
                    <button class="guide-nav-btn" data-section="install">
                        <i class="fas fa-cogs"></i>
                        <span>ูุตุจ</span>
                    </button>
                    <button class="guide-nav-btn" data-section="license">
                        <i class="fas fa-key"></i>
                        <span>ูุงุณูุณ</span>
                    </button>
                    <button class="guide-nav-btn" data-section="troubleshoot">
                        <i class="fas fa-wrench"></i>
                        <span>ุฑูุน ูุดฺฉู</span>
                    </button>
                </div>

                <!-- Guide Content -->
                <div class="guide-content">
                    <!-- Section: Intro -->
                    <div class="guide-section active" id="guide-intro">
                        <div class="guide-section-icon">
                            <i class="fas fa-rocket"></i>
                        </div>
                        <h3>ุจู ูุตุงุจ ููุดููุฏ OdooMaster ุฎูุด ุขูุฏุฏ! ๐</h3>
                        <p class="guide-intro-text">
                            ุงู ุฑุงูููุง ุจู ุดูุง ฺฉูฺฉ ูโฺฉูุฏ ุชุง Odoo 19 ุฑุง ุฏุฑ ฺฉูุชุฑู ุฒูุงู ู ุจุฏูู ุฏุฑุฏุณุฑ ุฑู ุณุณุชู ุฎูุฏ ูุตุจ ฺฉูุฏ.
                        </p>
                        
                        <div class="guide-features-grid">
                            <div class="guide-feature-card">
                                <div class="feature-icon blue">
                                    <i class="fas fa-cloud-download-alt"></i>
                                </div>
                                <h4>ูุตุจ ุขููุงู</h4>
                                <p>ุจุง ูุณุฎู ุณุจฺฉ (130KB) ููู ฺุฒ ุฎูุฏฺฉุงุฑ ุฏุงูููุฏ ู ูุตุจ ูโุดูุฏ</p>
                            </div>
                            <div class="guide-feature-card">
                                <div class="feature-icon green">
                                    <i class="fas fa-magic"></i>
                                </div>
                                <h4>ฺฉุงููุงู ุฎูุฏฺฉุงุฑ</h4>
                                <p>Python, PostgreSQL, Git ู ููู ูุงุฒููุฏโูุง ุฎูุฏฺฉุงุฑ ูุตุจ ูโุดููุฏ</p>
                            </div>
                            <div class="guide-feature-card">
                                <div class="feature-icon orange">
                                    <i class="fas fa-shield-alt"></i>
                                </div>
                                <h4>ุงูู ู ูุทูุฆู</h4>
                                <p>ููู ูุงูโูุง ุงุฒ ููุงุจุน ุฑุณู ุฏุงูููุฏ ูโุดููุฏ</p>
                            </div>
                        </div>

                        <div class="guide-cta">
                            <button class="btn btn-primary btn-glow" onclick="guideGoToSection('download')">
                                <i class="fas fa-arrow-left"></i>
                                ุดุฑูุน ฺฉูู
                            </button>
                        </div>
                    </div>

                    <!-- Section: Download -->
                    <div class="guide-section" id="guide-download">
                        <h3><i class="fas fa-download"></i> ูุฑุญูู ฑ: ุฏุงูููุฏ ูุตุงุจ</h3>
                        
                        <div class="guide-step-card">
                            <div class="step-number">ฑ</div>
                            <div class="step-content">
                                <h4>ุฏุงูููุฏ ูุงู ZIP ูุตุงุจ</h4>
                                <p>ุงุฒ ุจุฎุด "ุฏุงูููุฏ ูุตุงุจ" ุฏุฑ ููู ุฏุงุดุจูุฑุฏุ ูุงู ZIP ุฑุง ุฏุงูููุฏ ฺฉูุฏ. ุงู ูุงู ููุท 130KB ุงุณุช!</p>
                                <div class="step-tip">
                                    <i class="fas fa-lightbulb"></i>
                                    <span>ูฺฉุชู: ูุตุงุจ ุฑุงฺฏุงู ุงุณุช ู ูุงุฒ ุจู ูุงุณูุณ ุจุฑุง ุฏุงูููุฏ ูุฏุงุฑุฏ.</span>
                                </div>
                            </div>
                        </div>

                        <div class="guide-step-card">
                            <div class="step-number">ฒ</div>
                            <div class="step-content">
                                <h4>Unblock ฺฉุฑุฏู ูุงู ZIP</h4>
                                <p>ููุฏูุฒ ููฺฉู ุงุณุช ูุงูโูุง ุฏุงูููุฏ ุดุฏู ุฑุง ุจูุงฺฉ ฺฉูุฏ. ุงู ฺฉุงุฑ ุฑุง ุงูุฌุงู ุฏูุฏ:</p>
                                <ol class="guide-steps-list">
                                    <li>ุฑู ูุงู ZIP <strong>ุฑุงุณุชโฺฉูฺฉ</strong> ฺฉูุฏ</li>
                                    <li>ฺฏุฒูู <strong>Properties</strong> ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ</li>
                                    <li>ุฏุฑ ูพุงู ูพูุฌุฑูุ ุชฺฉ <strong>Unblock</strong> ุฑุง ุจุฒูุฏ</li>
                                    <li>ุฑู <strong>OK</strong> ฺฉูฺฉ ฺฉูุฏ</li>
                                </ol>
                                <div class="step-warning">
                                    <i class="fas fa-exclamation-triangle"></i>
                                    <span>ููู: ุงฺฏุฑ ุงู ฺฉุงุฑ ุฑุง ูฺฉูุฏุ ููฺฉู ุงุณุช ุจุฑูุงูู ุฏุฑุณุช ุงุฌุฑุง ูุดูุฏ!</span>
                                </div>
                            </div>
                        </div>

                        <div class="guide-step-card">
                            <div class="step-number">ณ</div>
                            <div class="step-content">
                                <h4>ุงุณุชุฎุฑุงุฌ (Extract) ูุงู</h4>
                                <p>ูุงู ZIP ุฑุง ุฏุฑ ฺฉ ูุณุฑ ุณุงุฏู (ุจุฏูู ูุงุตูู ู ุญุฑูู ูุงุฑุณ) Extract ฺฉูุฏ.</p>
                                <div class="step-example">
                                    <i class="fas fa-check-circle"></i>
                                    <code>C:\OdooMaster</code> ุง <code>D:\Odoo</code>
                                </div>
                                <div class="step-warning">
                                    <i class="fas fa-times-circle"></i>
                                    <span>ุงุฒ ูุณุฑูุง ูุซู <code>C:\Users\ุนู\Desktop</code> ุงุณุชูุงุฏู ูฺฉูุฏ!</span>
                                </div>
                            </div>
                        </div>

                        <div class="guide-nav-buttons">
                            <button class="btn btn-outline" onclick="guideGoToSection('intro')">
                                <i class="fas fa-arrow-right"></i> ูุจู
                            </button>
                            <button class="btn btn-primary" onclick="guideGoToSection('systemcheck')">
                                ุจุนุฏ <i class="fas fa-arrow-left"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Section: System Check -->
                    <div class="guide-section" id="guide-systemcheck">
                        <h3><i class="fas fa-stethoscope"></i> ูุฑุญูู ฒ: ุจุฑุฑุณ ุณุณุชู</h3>
                        
                        <p class="guide-intro-text">
                            ูุจู ุงุฒ ูุตุจ Odooุ ุจุงุฏ ูุงุฒููุฏโูุง ุณุณุชู ุจุฑุฑุณ ุดููุฏ. ูุตุงุจ ุงู ฺฉุงุฑ ุฑุง ุฎูุฏฺฉุงุฑ ุงูุฌุงู ูโุฏูุฏ.
                        </p>

                        <div class="guide-requirements-list">
                            <div class="requirement-item">
                                <div class="req-icon"><i class="fas fa-desktop"></i></div>
                                <div class="req-info">
                                    <h4>ุณุณุชู ุนุงูู</h4>
                                    <p>Windows 10/11 (64-bit)</p>
                                </div>
                                <span class="req-badge required">ุงูุฒุงู</span>
                            </div>
                            <div class="requirement-item">
                                <div class="req-icon"><i class="fab fa-python"></i></div>
                                <div class="req-info">
                                    <h4>Python 3.11</h4>
                                    <p>ุจุฑุง ุงุฌุฑุง Odoo - ุฎูุฏฺฉุงุฑ ูุตุจ ูโุดูุฏ</p>
                                </div>
                                <span class="req-badge auto">ูุตุจ ุฎูุฏฺฉุงุฑ</span>
                            </div>
                            <div class="requirement-item">
                                <div class="req-icon"><i class="fas fa-database"></i></div>
                                <div class="req-info">
                                    <h4>PostgreSQL 16</h4>
                                    <p>ุฏุชุงุจุณ Odoo - ุฎูุฏฺฉุงุฑ ูุตุจ ูโุดูุฏ</p>
                                </div>
                                <span class="req-badge auto">ูุตุจ ุฎูุฏฺฉุงุฑ</span>
                            </div>
                            <div class="requirement-item">
                                <div class="req-icon"><i class="fab fa-git-alt"></i></div>
                                <div class="req-info">
                                    <h4>Git</h4>
                                    <p>ุจุฑุง ุฏุฑุงูุช ุณูุฑุณ Odoo - ุฎูุฏฺฉุงุฑ ูุตุจ ูโุดูุฏ</p>
                                </div>
                                <span class="req-badge auto">ูุตุจ ุฎูุฏฺฉุงุฑ</span>
                            </div>
                            <div class="requirement-item">
                                <div class="req-icon"><i class="fab fa-node-js"></i></div>
                                <div class="req-info">
                                    <h4>Node.js LTS</h4>
                                    <p>ุจุฑุง ฺฉุงููพุงู assets - ุฎูุฏฺฉุงุฑ ูุตุจ ูโุดูุฏ</p>
                                </div>
                                <span class="req-badge auto">ูุตุจ ุฎูุฏฺฉุงุฑ</span>
                            </div>
                        </div>

                        <div class="guide-info-box success">
                            <i class="fas fa-magic"></i>
                            <div>
                                <strong>ูฺฏุฑุงู ูุจุงุดุฏ!</strong>
                                <p>ูุตุงุจ ููู ุงู ููุงุฑุฏ ุฑุง ุจุฑุฑุณ ูโฺฉูุฏ ู ูุฑ ฺฉุฏุงู ฺฉู ูุตุจ ูุจุงุดุฏุ ุฎูุฏฺฉุงุฑ ุงุฒ ุณุงุช ุฑุณู ุฏุงูููุฏ ู ูุตุจ ูโฺฉูุฏ.</p>
                            </div>
                        </div>

                        <div class="guide-nav-buttons">
                            <button class="btn btn-outline" onclick="guideGoToSection('download')">
                                <i class="fas fa-arrow-right"></i> ูุจู
                            </button>
                            <button class="btn btn-primary" onclick="guideGoToSection('install')">
                                ุจุนุฏ <i class="fas fa-arrow-left"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Section: Install -->
                    <div class="guide-section" id="guide-install">
                        <h3><i class="fas fa-cogs"></i> ูุฑุญูู ณ: ุงุฌุฑุง ูุตุงุจ</h3>

                        <div class="guide-step-card">
                            <div class="step-number">ฑ</div>
                            <div class="step-content">
                                <h4>ุงุฌุฑุง ูุตุงุจ</h4>
                                <p>ูุงุฑุฏ ูพูุดู Extract ุดุฏู ุดูุฏ ู ูุงู ุฒุฑ ุฑุง ุงุฌุฑุง ฺฉูุฏ:</p>
                                <div class="step-file-box">
                                    <i class="fas fa-file-code"></i>
                                    <code>start_ui_online.bat</code>
                                </div>
                                <div class="step-tip">
                                    <i class="fas fa-lightbulb"></i>
                                    <span>ุงฺฏุฑ ุขูุชโูุฑูุณ ูุดุฏุงุฑ ุฏุงุฏุ Allow ุง ุงุฌุงุฒู ุจุฏูุฏ.</span>
                                </div>
                            </div>
                        </div>

                        <div class="guide-step-card">
                            <div class="step-number">ฒ</div>
                            <div class="step-content">
                                <h4>ุดูุงุณู ุณุฎุชโุงูุฒุงุฑ (Hardware ID)</h4>
                                <p>ูุตุงุจ ฺฉ <strong>ุดูุงุณู ุณุฎุชโุงูุฒุงุฑ</strong> ููุญุตุฑุจูโูุฑุฏ ุจุฑุง ุณุณุชู ุดูุง ููุงุด ูโุฏูุฏ. ุงู ุดูุงุณู ุจุฑุง ูุนุงูโุณุงุฒ ูุงุณูุณ ูุงุฒู ุงุณุช.</p>
                                <div class="step-example">
                                    <i class="fas fa-fingerprint"></i>
                                    <code>ูุซุงู: A1B2C3D4E5F6G7H8</code>
                                </div>
                            </div>
                        </div>

                        <div class="guide-step-card">
                            <div class="step-number">ณ</div>
                            <div class="step-content">
                                <h4>ุดุฑูุน ฺฺฉ ุณุณุชู</h4>
                                <p>ุฑู ุฏฺฉูู <strong>"ุดุฑูุน ุจุฑุฑุณ ุณุณุชู"</strong> ฺฉูฺฉ ฺฉูุฏ. ูุตุงุจ ููุงุฑุฏ ุฒุฑ ุฑุง ุจุฑุฑุณ ูโฺฉูุฏ:</p>
                                <ul class="guide-check-list">
                                    <li><i class="fas fa-check"></i> ูุณุฎู ููุฏูุฒ</li>
                                    <li><i class="fas fa-check"></i> Python ูุตุจ ุดุฏู ุง ุฎุฑ</li>
                                    <li><i class="fas fa-check"></i> PostgreSQL ูุตุจ ุดุฏู ุง ุฎุฑ</li>
                                    <li><i class="fas fa-check"></i> Git ูุตุจ ุดุฏู ุง ุฎุฑ</li>
                                    <li><i class="fas fa-check"></i> Node.js ูุตุจ ุดุฏู ุง ุฎุฑ</li>
                                </ul>
                            </div>
                        </div>

                        <div class="guide-step-card">
                            <div class="step-number">ด</div>
                            <div class="step-content">
                                <h4>ูุตุจ ูุงุฒููุฏโูุง</h4>
                                <p>ุงฺฏุฑ ฺุฒ ูุตุจ ูุจุงุดุฏุ ุฏฺฉูู <strong>"ูุตุจ ูุงุฒููุฏโูุง"</strong> ุธุงูุฑ ูโุดูุฏ. ุจุง ฺฉูฺฉ ุฑู ุขูุ ูุตุจ ุฎูุฏฺฉุงุฑ ุดุฑูุน ูโุดูุฏ.</p>
                                <div class="step-tip">
                                    <i class="fas fa-clock"></i>
                                    <span>ุงู ูุฑุญูู ุจุณุชู ุจู ุณุฑุนุช ุงูุชุฑูุชุ ููฺฉู ุงุณุช 10 ุชุง 30 ุฏููู ุทูู ุจฺฉุดุฏ.</span>
                                </div>
                            </div>
                        </div>

                        <div class="guide-nav-buttons">
                            <button class="btn btn-outline" onclick="guideGoToSection('systemcheck')">
                                <i class="fas fa-arrow-right"></i> ูุจู
                            </button>
                            <button class="btn btn-primary" onclick="guideGoToSection('license')">
                                ุจุนุฏ <i class="fas fa-arrow-left"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Section: License -->
                    <div class="guide-section" id="guide-license">
                        <h3><i class="fas fa-key"></i> ูุฑุญูู ด: ูุนุงูโุณุงุฒ ูุงุณูุณ</h3>

                        <div class="guide-step-card">
                            <div class="step-number">ฑ</div>
                            <div class="step-content">
                                <h4>ฺฉูพ ฺฉุฑุฏู ุดูุงุณู ุณุฎุชโุงูุฒุงุฑ</h4>
                                <p>ุงุฒ ูุตุงุจุ ุดูุงุณู ุณุฎุชโุงูุฒุงุฑ ุฑุง ฺฉูพ ฺฉูุฏ.</p>
                            </div>
                        </div>

                        <div class="guide-step-card">
                            <div class="step-number">ฒ</div>
                            <div class="step-content">
                                <h4>ุฎุฑุฏ ูุงุณูุณ</h4>
                                <p>ุจู ุจุฎุด <strong>"ุฎุฑุฏ ูุงุณูุณ"</strong> ุฏุฑ ุฏุงุดุจูุฑุฏ ุจุฑูุฏ ู ุจุง ูุงุฑุฏ ฺฉุฑุฏู ุดูุงุณู ุณุฎุชโุงูุฒุงุฑุ ูุงุณูุณ ุจุฎุฑุฏ.</p>
                                <a href="payment.html" class="btn btn-primary btn-sm" style="margin-top: 10px;">
                                    <i class="fas fa-shopping-cart"></i> ุฑูุชู ุจู ุตูุญู ุฎุฑุฏ
                                </a>
                            </div>
                        </div>

                        <div class="guide-step-card">
                            <div class="step-number">ณ</div>
                            <div class="step-content">
                                <h4>ุฏุงูููุฏ ูุงู ูุงุณูุณ</h4>
                                <p>ูพุณ ุงุฒ ุฎุฑุฏุ ูุงู ูุงุณูุณ (<code>.oml</code>) ุฑุง ุฏุงูููุฏ ฺฉูุฏ.</p>
                            </div>
                        </div>

                        <div class="guide-step-card">
                            <div class="step-number">ด</div>
                            <div class="step-content">
                                <h4>ูุฑุงุฑ ุฏุงุฏู ูุงู ูุงุณูุณ</h4>
                                <p>ูุงู ูุงุณูุณ ุฑุง ุฏุฑ <strong>ููุงู ูพูุดูโุง ฺฉู ูุตุงุจ ูุณุช</strong> ูุฑุงุฑ ุฏูุฏ (ฺฉูุงุฑ ูุงู start_ui_online.bat).</p>
                                <div class="step-example">
                                    <i class="fas fa-folder-open"></i>
                                    <code>C:\OdooMaster\license.oml</code>
                                </div>
                            </div>
                        </div>

                        <div class="guide-step-card">
                            <div class="step-number">ต</div>
                            <div class="step-content">
                                <h4>ูุตุจ Odoo!</h4>
                                <p>ุญุงูุง ูุตุงุจ ุฑุง ูุฌุฏุฏ ุงุฌุฑุง ฺฉูุฏ. ุจุง ุฏุงุดุชู ูุงุณูุณ ูุนุชุจุฑุ ูโุชูุงูุฏ Odoo ุฑุง ูุตุจ ฺฉูุฏ.</p>
                                <div class="step-tip success">
                                    <i class="fas fa-check-circle"></i>
                                    <span>ุชุจุฑฺฉ! ูพุณ ุงุฒ ูุตุจุ Odoo ุฏุฑ ุขุฏุฑุณ <code>http://localhost:8069</code> ุฏุฑ ุฏุณุชุฑุณ ุฎูุงูุฏ ุจูุฏ.</span>
                                </div>
                            </div>
                        </div>

                        <div class="guide-nav-buttons">
                            <button class="btn btn-outline" onclick="guideGoToSection('install')">
                                <i class="fas fa-arrow-right"></i> ูุจู
                            </button>
                            <button class="btn btn-primary" onclick="guideGoToSection('troubleshoot')">
                                ุฑูุน ูุดฺฉูุงุช <i class="fas fa-arrow-left"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Section: Troubleshoot -->
                    <div class="guide-section" id="guide-troubleshoot">
                        <h3><i class="fas fa-wrench"></i> ุฑูุน ูุดฺฉูุงุช ุฑุงุฌ</h3>

                        <div class="guide-faq-list">
                            <div class="faq-item">
                                <div class="faq-question" onclick="toggleFaq(this)">
                                    <i class="fas fa-chevron-left"></i>
                                    <span>ูุตุงุจ ุงุฌุฑุง ููโุดูุฏ ุง ุจุณุชู ูโุดูุฏ</span>
                                </div>
                                <div class="faq-answer">
                                    <ul>
                                        <li>ูุทูุฆู ุดูุฏ ูุงู ZIP ุฑุง Unblock ฺฉุฑุฏูโุงุฏ</li>
                                        <li>ูุตุงุจ ุฑุง <strong>Run as Administrator</strong> ุงุฌุฑุง ฺฉูุฏ</li>
                                        <li>ุขูุชโูุฑูุณ ุฑุง ูููุชุงู ุบุฑูุนุงู ฺฉูุฏ</li>
                                        <li>ูุณุฑ ูุตุจ ูุจุงุฏ ุญุฑูู ูุงุฑุณ ุง ูุงุตูู ุฏุงุดุชู ุจุงุดุฏ</li>
                                    </ul>
                                </div>
                            </div>

                            <div class="faq-item">
                                <div class="faq-question" onclick="toggleFaq(this)">
                                    <i class="fas fa-chevron-left"></i>
                                    <span>ุฎุทุง ูุตุจ Python</span>
                                </div>
                                <div class="faq-answer">
                                    <ul>
                                        <li>ุงฺฏุฑ Python ูุจูุงู ูุตุจ ุงุณุชุ ุขู ุฑุง Uninstall ู ุฏูุจุงุฑู ูุตุจ ฺฉูุฏ</li>
                                        <li>ุญุชูุงู ฺฏุฒูู <strong>Add to PATH</strong> ุฑุง ุชฺฉ ุจุฒูุฏ</li>
                                        <li>ุจุนุฏ ุงุฒ ูุตุจุ ุณุณุชู ุฑุง Restart ฺฉูุฏ</li>
                                    </ul>
                                </div>
                            </div>

                            <div class="faq-item">
                                <div class="faq-question" onclick="toggleFaq(this)">
                                    <i class="fas fa-chevron-left"></i>
                                    <span>ุฎุทุง ูุตุจ PostgreSQL</span>
                                </div>
                                <div class="faq-answer">
                                    <ul>
                                        <li>ูพูุฑุช ูพุดโูุฑุถ 5432 ุจุงุฏ ุขุฒุงุฏ ุจุงุดุฏ</li>
                                        <li>ุฑูุฒ ุนุจูุฑ ุฑุง ุณุงุฏู ุงูุชุฎุงุจ ฺฉูุฏ (ูุซู: <code>odoo</code>)</li>
                                        <li>ุงฺฏุฑ PostgreSQL ูุจู ูุตุจ ุงุณุชุ ุขู ุฑุง ฺฉุงูู ุญุฐู ฺฉูุฏ</li>
                                    </ul>
                                </div>
                            </div>

                            <div class="faq-item">
                                <div class="faq-question" onclick="toggleFaq(this)">
                                    <i class="fas fa-chevron-left"></i>
                                    <span>Odoo ุงุฌุฑุง ููโุดูุฏ</span>
                                </div>
                                <div class="faq-answer">
                                    <ul>
                                        <li>PostgreSQL ุจุงุฏ ุฏุฑ ุญุงู ุงุฌุฑุง ุจุงุดุฏ (ุณุฑูุณ ุขู ุฑุง ฺฺฉ ฺฉูุฏ)</li>
                                        <li>ูพูุฑุช 8069 ูุจุงุฏ ุชูุณุท ุจุฑูุงูู ุฏฺฏุฑ ุงุณุชูุงุฏู ุดูุฏ</li>
                                        <li>ูุงุฑูุงู ููุฏูุฒ ููฺฉู ุงุณุช ูุณุฏูุฏ ฺฉุฑุฏู ุจุงุดุฏ</li>
                                    </ul>
                                </div>
                            </div>

                            <div class="faq-item">
                                <div class="faq-question" onclick="toggleFaq(this)">
                                    <i class="fas fa-chevron-left"></i>
                                    <span>ูุงุณูุณ ุดูุงุณุง ููโุดูุฏ</span>
                                </div>
                                <div class="faq-answer">
                                    <ul>
                                        <li>ูุงู ูุงุณูุณ ุจุงุฏ ุฏููุงู ฺฉูุงุฑ ูุตุงุจ ุจุงุดุฏ</li>
                                        <li>ูุงู ูุงู ุฑุง ุชุบุฑ ูุฏูุฏ</li>
                                        <li>ุดูุงุณู ุณุฎุชโุงูุฒุงุฑ ุจุงุฏ ุจุง ุณุณุชู ูุนู ูุทุงุจูุช ุฏุงุดุชู ุจุงุดุฏ</li>
                                        <li>ูุงุณูุณ ูููุถ ูุดุฏู ุจุงุดุฏ</li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <div class="guide-info-box info">
                            <i class="fas fa-headset"></i>
                            <div>
                                <strong>ูุงุฒ ุจู ฺฉูฺฉ ุจุดุชุฑ ุฏุงุฑุฏุ</strong>
                                <p>ุจุง ูพุดุชุจุงู ูุง ุชูุงุณ ุจฺฏุฑุฏ ุง ุงุฒ ุจุฎุด ุชฺฉุชโูุง ุณูุงู ุฎูุฏ ุฑุง ูุทุฑุญ ฺฉูุฏ.</p>
                            </div>
                        </div>

                        <div class="guide-nav-buttons">
                            <button class="btn btn-outline" onclick="guideGoToSection('license')">
                                <i class="fas fa-arrow-right"></i> ูุจู
                            </button>
                            <button class="btn btn-primary" onclick="closeGuideModal()">
                                <i class="fas fa-check"></i> ูุชูุฌู ุดุฏู
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="js/i18n.js"></script>
    <script src="js/api.js"></script>
    <script src="js/main.js"></script>
    <script src="js/installer.js"></script>
    <script src="js/dashboard.js"></script>
    <script>
        // ============================================
        // Installation Guide Modal Functions
        // ============================================
        
        function openGuideModal() {
            const modal = document.getElementById('guideModal');
            if (modal) {
                modal.classList.add('active');
                document.body.style.overflow = 'hidden';
            }
        }
        
        function closeGuideModal() {
            const modal = document.getElementById('guideModal');
            if (modal) {
                modal.classList.remove('active');
                document.body.style.overflow = '';
            }
        }
        
        function guideGoToSection(sectionId) {
            // Update nav buttons
            document.querySelectorAll('.guide-nav-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.dataset.section === sectionId) {
                    btn.classList.add('active');
                }
            });
            
            // Update sections
            document.querySelectorAll('.guide-section').forEach(section => {
                section.classList.remove('active');
            });
            
            const targetSection = document.getElementById('guide-' + sectionId);
            if (targetSection) {
                targetSection.classList.add('active');
            }
        }
        
        function toggleFaq(element) {
            const faqItem = element.closest('.faq-item');
            if (faqItem) {
                faqItem.classList.toggle('open');
            }
        }
        
        // ============================================
        // Premium System Check with Beautiful UI
        // ============================================
        
        const PremiumSystemCheck = {
            // Error solutions database
            solutions: {
                python: {
                    error: {
                        title: 'Python ูุตุจ ูุณุช',
                        description: 'ููุณุฑ ูพุงุชูู ุจุฑุง ุงุฌุฑุง Odoo ุถุฑูุฑ ุงุณุช.',
                        solution: 'ูุตุงุจ ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ Python 3.11 ุฑุง ุงุฒ ุณุงุช ุฑุณู ุฏุงูููุฏ ู ูุตุจ ูโฺฉูุฏ.',
                        autoFix: true,
                        downloadUrl: 'https://www.python.org/ftp/python/3.11.9/python-3.11.9-amd64.exe'
                    },
                    warning: {
                        title: 'ูุณุฎู Python ูุฏู ุงุณุช',
                        description: 'ูุณุฎู ูุนู Python ุจุง Odoo 19 ุณุงุฒฺฏุงุฑ ูุณุช.',
                        solution: 'Python 3.11 ูุตุจ ุฎูุงูุฏ ุดุฏ. ูุณุฎู ูุฏู ูโุชูุงูุฏ ุจุงู ุจูุงูุฏ.',
                        autoFix: true
                    }
                },
                postgresql: {
                    error: {
                        title: 'PostgreSQL ูุตุจ ูุณุช',
                        description: 'Odoo ุจุฑุง ุฐุฎุฑู ุฏุงุฏูโูุง ุจู PostgreSQL ูุงุฒ ุฏุงุฑุฏ.',
                        solution: 'PostgreSQL 16 ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ุฏุงูููุฏ ู ูุตุจ ูโุดูุฏ.',
                        autoFix: true,
                        downloadUrl: 'https://get.enterprisedb.com/postgresql/postgresql-16.3-1-windows-x64.exe',
                        tips: ['ุฑูุฒ ุนุจูุฑ ุณุงุฏู ุงูุชุฎุงุจ ฺฉูุฏ (ูุซู: odoo)', 'ูพูุฑุช ูพุดโูุฑุถ 5432 ุฑุง ุชุบุฑ ูุฏูุฏ']
                    }
                },
                git: {
                    error: {
                        title: 'Git ูุตุจ ูุณุช',
                        description: 'ุจุฑุง ุฏุฑุงูุช ุณูุฑุณ ฺฉุฏ Odoo ุงุฒ GitHub ุจู Git ูุงุฒ ุงุณุช.',
                        solution: 'Git ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ูุตุจ ูโุดูุฏ.',
                        autoFix: true,
                        downloadUrl: 'https://github.com/git-for-windows/git/releases/download/v2.45.2.windows.1/Git-2.45.2-64-bit.exe'
                    },
                    warning: {
                        title: 'ูุณุฎู Git ูุฏู ุงุณุช',
                        description: 'ุชูุตู ูโุดูุฏ Git ุฑุง ุจูโุฑูุฒุฑุณุงู ฺฉูุฏ.',
                        solution: 'ูโุชูุงูุฏ ุงุฏุงูู ุฏูุฏ ุง Git ุฑุง ุขูพุฏุช ฺฉูุฏ.',
                        autoFix: true
                    }
                },
                nodejs: {
                    error: {
                        title: 'Node.js ูุตุจ ูุณุช',
                        description: 'ุจุฑุง ฺฉุงููพุงู assets ู ูุงูโูุง frontend ุจู Node.js ูุงุฒ ุงุณุช.',
                        solution: 'Node.js LTS ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ูุตุจ ูโุดูุฏ.',
                        autoFix: true,
                        downloadUrl: 'https://nodejs.org/dist/v20.14.0/node-v20.14.0-x64.msi'
                    }
                },
                vcredist: {
                    error: {
                        title: 'Visual C++ Redistributable ูุตุจ ูุณุช',
                        description: 'ุจุฑุฎ ฺฉุชุงุจุฎุงููโูุง Python ุจู ุงู ุจุณุชู ูุงุฒ ุฏุงุฑูุฏ.',
                        solution: 'VC++ Redistributable 2022 ูุตุจ ุฎูุงูุฏ ุดุฏ.',
                        autoFix: true,
                        downloadUrl: 'https://aka.ms/vs/17/release/vc_redist.x64.exe'
                    }
                },
                os: {
                    error: {
                        title: 'ุณุณุชู ุนุงูู ูพุดุชุจุงู ููโุดูุฏ',
                        description: 'ุงู ูุตุงุจ ููุท ุฑู Windows 10/11 64-bit ฺฉุงุฑ ูโฺฉูุฏ.',
                        solution: 'ูุทูุงู ุงุฒ ููุฏูุฒ 10 ุง 11 ูุณุฎู 64 ุจุช ุงุณุชูุงุฏู ฺฉูุฏ.',
                        autoFix: false
                    }
                }
            },
            
            updateCardStatus(checkName, status, message, version) {
                const card = document.querySelector(`.check-card-premium[data-check="${checkName}"]`);
                if (!card) return;
                
                // Remove all status classes
                card.classList.remove('checking', 'success', 'warning', 'error');
                card.classList.add(status);
                
                // Update status text
                const statusText = card.querySelector('.status-text');
                if (statusText) {
                    statusText.textContent = version || message || this.getStatusText(status);
                }
                
                // Update status icon
                const statusIcon = card.querySelector('.status-icon i');
                if (statusIcon) {
                    statusIcon.className = this.getStatusIcon(status);
                }
                
                // Update version info
                const versionText = card.querySelector('.check-version');
                if (versionText && version) {
                    versionText.textContent = version;
                }
            },
            
            getStatusText(status) {
                const texts = {
                    checking: 'ุฏุฑ ุญุงู ุจุฑุฑุณ...',
                    success: 'ูุตุจ ุดุฏู โ',
                    warning: 'ูุงุฒ ุจู ุขูพุฏุช',
                    error: 'ูุตุจ ูุดุฏู'
                };
                return texts[status] || status;
            },
            
            getStatusIcon(status) {
                const icons = {
                    checking: 'fas fa-spinner fa-spin',
                    success: 'fas fa-check',
                    warning: 'fas fa-exclamation',
                    error: 'fas fa-times'
                };
                return icons[status] || 'fas fa-question';
            },
            
            showDetailsPanel(issues) {
                const panel = document.getElementById('checkDetailsPanel');
                const content = document.getElementById('checkDetailsContent');
                
                if (!panel || !content || issues.length === 0) {
                    if (panel) panel.style.display = 'none';
                    return;
                }
                
                let html = '';
                issues.forEach(issue => {
                    const solution = this.solutions[issue.name]?.[issue.status];
                    if (!solution) return;
                    
                    html += `
                        <div class="detail-item ${issue.status}">
                            <div class="detail-item-icon">
                                <i class="${issue.status === 'error' ? 'fas fa-times-circle' : 'fas fa-exclamation-triangle'}"></i>
                            </div>
                            <div class="detail-item-content">
                                <h5>${solution.title}</h5>
                                <p>${solution.description}</p>
                                <div class="detail-solution">
                                    <strong><i class="fas fa-magic"></i> ุฑุงูโุญู:</strong>
                                    <span>${solution.solution}</span>
                                </div>
                                ${solution.tips ? `
                                    <ul style="margin-top: 10px; padding-right: 20px; color: var(--text-secondary); font-size: 0.85rem;">
                                        ${solution.tips.map(tip => `<li>${tip}</li>`).join('')}
                                    </ul>
                                ` : ''}
                                ${solution.autoFix ? `
                                    <div class="detail-actions">
                                        <span class="btn btn-sm btn-success" style="cursor: default;">
                                            <i class="fas fa-check"></i> ูุตุจ ุฎูุฏฺฉุงุฑ
                                        </span>
                                    </div>
                                ` : ''}
                            </div>
                        </div>
                    `;
                });
                
                content.innerHTML = html;
                panel.style.display = 'block';
            },
            
            async runCheck() {
                const checkBtn = document.getElementById('startSystemCheck');
                const installBtn = document.getElementById('installMissing');
                const guideBtn2 = document.getElementById('openGuideBtn2');
                const statusBadge = document.getElementById('systemStatus');
                
                if (!checkBtn) return;
                
                // Disable button and show loading
                checkBtn.disabled = true;
                checkBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> ุฏุฑ ุญุงู ุจุฑุฑุณ...';
                statusBadge.textContent = 'ุฏุฑ ุญุงู ุจุฑุฑุณ...';
                statusBadge.style.background = 'linear-gradient(135deg, var(--primary), var(--secondary))';
                statusBadge.style.color = 'white';
                
                // Hide details panel
                const detailsPanel = document.getElementById('checkDetailsPanel');
                if (detailsPanel) detailsPanel.style.display = 'none';
                
                // Set all cards to checking state
                const checkOrder = ['os', 'python', 'postgresql', 'postgres', 'git', 'nodejs', 'vcredist', 'vc_redist', 'wkhtmltopdf'];
                checkOrder.forEach(name => this.updateCardStatus(name, 'checking', 'ุฏุฑ ุญุงู ุจุฑุฑุณ...'));
                
                const issues = [];
                
                try {
                    // Try to use real API first
                    const response = await fetch('/api/system_check');
                    
                    if (response.ok) {
                        const data = await response.json();
                        
                        if (data.success && data.checks) {
                            // Process API results
                            for (const check of data.checks) {
                                await this.delay(100); // Short animation delay
                                
                                // Map API status to UI
                                const uiStatus = check.status === 'success' ? 'success' : 
                                                 check.status === 'warning' ? 'warning' : 'error';
                                
                                this.updateCardStatus(
                                    check.id,
                                    uiStatus,
                                    check.status === 'success' ? check.details : check.solution,
                                    check.details
                                );
                                
                                // Update solutions database with API data
                                if (check.status !== 'success') {
                                    this.solutions[check.id] = this.solutions[check.id] || {};
                                    this.solutions[check.id][uiStatus] = {
                                        title: check.name,
                                        description: check.description || check.solution,
                                        solution: check.solution,
                                        autoFix: check.auto_fix,
                                        downloadUrl: check.official_url
                                    };
                                    
                                    issues.push({ name: check.id, status: uiStatus, result: check });
                                }
                                
                                // Store result
                                OnlineInstaller.state.checkResults[check.id] = {
                                    installed: check.status === 'success',
                                    version: check.details,
                                    status: uiStatus,
                                    install_cmd: check.install_cmd,
                                    auto_fix: check.auto_fix,
                                    offline_ready: check.offline_ready
                                };
                            }
                            
                            // Build install queue from API data
                            OnlineInstaller.buildInstallQueueFromApi(data.checks);
                            
                            // Show success toast
                            if (typeof showToast === 'function' && data.all_ok) {
                                showToast('ุณุณุชู ุขูุงุฏู ูุตุจ Odoo ุงุณุช!', 'success');
                            }
                        }
                    } else {
                        throw new Error('API not available');
                    }
                } catch (apiError) {
                    console.warn('Real API not available, using simulation:', apiError);
                    
                    // Fallback to simulation
                    for (const checkName of checkOrder) {
                        this.updateCardStatus(checkName, 'checking', 'ุฏุฑ ุญุงู ุจุฑุฑุณ...');
                        await this.delay(600 + Math.random() * 400);
                        
                        const result = await OnlineInstaller.simulateCheck(checkName);
                        
                        this.updateCardStatus(
                            checkName, 
                            result.status, 
                            result.message || (result.installed ? result.version : 'ูุตุจ ูุดุฏู'),
                            result.version
                        );
                        
                        if (result.status === 'error' || result.status === 'warning') {
                            issues.push({ name: checkName, status: result.status, result });
                        }
                    }
                    
                    OnlineInstaller.buildInstallQueue();
                }
                
                // Show details panel if there are issues
                this.showDetailsPanel(issues);
                
                // Update status badge and buttons
                if (OnlineInstaller.state.installQueue.length > 0) {
                    if (installBtn) installBtn.style.display = 'inline-flex';
                    if (guideBtn2) guideBtn2.style.display = 'inline-flex';
                    statusBadge.textContent = `${OnlineInstaller.state.installQueue.length} ููุฑุฏ ูุงุฒ ุจู ูุตุจ`;
                    statusBadge.style.background = 'linear-gradient(135deg, #f59e0b, #d97706)';
                } else {
                    if (installBtn) installBtn.style.display = 'none';
                    statusBadge.textContent = 'ุขูุงุฏู ูุตุจ Odoo โ';
                    statusBadge.style.background = 'linear-gradient(135deg, #10b981, #059669)';
                }
                
                // Re-enable button
                checkBtn.disabled = false;
                checkBtn.innerHTML = '<i class="fas fa-redo"></i> <span>ุจุฑุฑุณ ูุฌุฏุฏ</span>';
            },
            
            async startInstallation() {
                const installBtn = document.getElementById('installMissing');
                const queue = OnlineInstaller.state.installQueue;
                
                if (queue.length === 0) {
                    if (typeof showToast === 'function') {
                        showToast('ููู ูุงุฒููุฏโูุง ูุตุจ ูุณุชูุฏ!', 'success');
                    }
                    return;
                }
                
                installBtn.disabled = true;
                installBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> ุฏุฑ ุญุงู ุขูุงุฏูโุณุงุฒ...';
                
                // Check if any items support auto-fix
                const autoFixItems = queue.filter(item => item.auto_fix && item.install_cmd);
                const hasAutoFix = autoFixItems.length > 0;
                
                // Show modal with installation options
                const modalContent = `
                    <div style="text-align: center; padding: 20px;">
                        <i class="fas fa-tools" style="font-size: 3rem; color: var(--primary); margin-bottom: 20px;"></i>
                        <h3 style="margin-bottom: 16px; color: var(--white);">ูุตุจ ูุงุฒููุฏโูุง</h3>
                        <p style="color: var(--text-secondary); margin-bottom: 24px;">
                            ${hasAutoFix ? 'ูโุชูุงูุฏ ูุตุจ ุฎูุฏฺฉุงุฑ ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ ุง ูุงูโูุง ุฑุง ุฏุณุช ุฏุงูููุฏ ฺฉูุฏ.' : 'ูุงูโูุง ูุตุจ ุฑุง ุฏุงูููุฏ ู ุงุฌุฑุง ฺฉูุฏ.'}
                        </p>
                        
                        ${hasAutoFix ? `
                            <div style="background: linear-gradient(135deg, rgba(16, 185, 129, 0.2), rgba(5, 150, 105, 0.2)); border: 1px solid rgba(16, 185, 129, 0.3); border-radius: 12px; padding: 16px; margin-bottom: 20px;">
                                <h4 style="color: #10b981; margin-bottom: 8px;"><i class="fas fa-magic"></i> ูุตุจ ุฎูุฏฺฉุงุฑ (ูพุดููุงุฏ)</h4>
                                <p style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 12px;">
                                    ุจุง ฺฉูฺฉ ุฑู ุฏฺฉูู ุฒุฑุ ${autoFixItems.length} ููุฑุฏ ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ูุตุจ ูโุดููุฏ.
                                </p>
                                <button id="autoInstallBtn" class="btn btn-success" onclick="PremiumSystemCheck.runAutoInstall()">
                                    <i class="fas fa-play"></i> ุดุฑูุน ูุตุจ ุฎูุฏฺฉุงุฑ
                                </button>
                            </div>
                        ` : ''}
                        
                        <div style="border-top: 1px solid var(--glass-border); padding-top: 20px; margin-top: 10px;">
                            <h4 style="color: var(--white); margin-bottom: 12px;"><i class="fas fa-download"></i> ุฏุงูููุฏ ุฏุณุช</h4>
                            <div style="display: flex; flex-direction: column; gap: 10px; text-align: right; max-width: 450px; margin: 0 auto;">
                                ${queue.map(item => `
                                    <div style="display: flex; align-items: center; justify-content: space-between; padding: 12px; background: var(--glass-bg); border-radius: 10px; border: 1px solid var(--glass-border);">
                                        <div style="flex: 1;">
                                            <strong style="color: var(--white);">${item.name}</strong>
                                            ${item.size ? `<span style="color: var(--text-secondary); font-size: 0.85rem; margin-right: 8px;">(${item.size})</span>` : ''}
                                            ${item.auto_fix ? '<span style="background: #10b981; color: white; padding: 2px 6px; border-radius: 4px; font-size: 0.7rem; margin-right: 8px;">ุฎูุฏฺฉุงุฑ</span>' : ''}
                                        </div>
                                        <div style="display: flex; gap: 8px;">
                                            ${item.auto_fix && item.install_cmd ? `
                                                <button class="btn btn-success btn-sm" onclick="PremiumSystemCheck.installSingle('${item.id}', this)" title="ูุตุจ ุฎูุฏฺฉุงุฑ">
                                                    <i class="fas fa-magic"></i>
                                                </button>
                                            ` : ''}
                                            ${item.url ? `
                                                <a href="${item.url}" target="_blank" class="btn btn-primary btn-sm" style="text-decoration: none;" title="ุฏุงูููุฏ ุงุฒ ุณุงุช ุฑุณู">
                                                    <i class="fas fa-external-link-alt"></i>
                                                </a>
                                            ` : ''}
                                        </div>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    </div>
                `;
                
                // Create and show modal
                const modal = document.createElement('div');
                modal.className = 'guide-modal-overlay active';
                modal.id = 'downloadModal';
                modal.innerHTML = `
                    <div class="guide-modal glass" style="max-width: 550px;">
                        <div class="guide-modal-header">
                            <div class="guide-modal-title">
                                <i class="fas fa-tools"></i>
                                <h2>ูุตุจ ูุงุฒููุฏโูุง</h2>
                            </div>
                            <button class="guide-modal-close" onclick="document.getElementById('downloadModal').remove(); document.body.style.overflow = '';">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        <div style="padding: 20px; max-height: 70vh; overflow-y: auto;">
                            ${modalContent}
                            <div style="text-align: center; margin-top: 20px;">
                                <button class="btn btn-outline" onclick="document.getElementById('downloadModal').remove(); document.body.style.overflow = '';">
                                    <i class="fas fa-times"></i> ุจุณุชู
                                </button>
                            </div>
                        </div>
                    </div>
                `;
                
                document.body.appendChild(modal);
                document.body.style.overflow = 'hidden';
                
                // Re-enable button
                installBtn.disabled = false;
                installBtn.innerHTML = '<i class="fas fa-download"></i> <span>ูุตุจ ูุงุฒููุฏโูุง</span>';
            },
            
            // ูุตุจ ุฎูุฏฺฉุงุฑ ฺฉ ฺฉุงููพูููุช
            async installSingle(componentId, buttonEl) {
                if (buttonEl) {
                    buttonEl.disabled = true;
                    buttonEl.innerHTML = '<i class="fas fa-spinner fa-spin"></i>';
                }
                
                try {
                    const response = await fetch(`/api/auto_fix?component=${componentId}`);
                    const data = await response.json();
                    
                    if (data.success) {
                        if (typeof showToast === 'function') {
                            showToast(`${componentId} ุฏุฑ ุญุงู ูุตุจ...`, 'info');
                        }
                        if (buttonEl) {
                            buttonEl.innerHTML = '<i class="fas fa-check"></i>';
                            buttonEl.classList.remove('btn-success');
                            buttonEl.classList.add('btn-outline');
                        }
                    } else {
                        throw new Error(data.error || 'Installation failed');
                    }
                } catch (error) {
                    console.error('Install error:', error);
                    if (typeof showToast === 'function') {
                        showToast(`ุฎุทุง ุฏุฑ ูุตุจ: ${error.message}`, 'error');
                    }
                    if (buttonEl) {
                        buttonEl.disabled = false;
                        buttonEl.innerHTML = '<i class="fas fa-magic"></i>';
                    }
                }
            },
            
            // ูุตุจ ุฎูุฏฺฉุงุฑ ููู ููุงุฑุฏ
            async runAutoInstall() {
                const autoBtn = document.getElementById('autoInstallBtn');
                if (autoBtn) {
                    autoBtn.disabled = true;
                    autoBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> ุฏุฑ ุญุงู ูุตุจ...';
                }
                
                const queue = OnlineInstaller.state.installQueue.filter(item => item.auto_fix && item.install_cmd);
                let installed = 0;
                
                for (const item of queue) {
                    try {
                        const response = await fetch(`/api/auto_fix?component=${item.id}`);
                        const data = await response.json();
                        
                        if (data.success) {
                            installed++;
                            if (typeof showToast === 'function') {
                                showToast(`${item.name} ุฏุฑ ุญุงู ูุตุจ... (${installed}/${queue.length})`, 'info');
                            }
                        }
                        
                        // Wait a bit between installations
                        await this.delay(1500);
                        
                    } catch (error) {
                        console.error(`Failed to install ${item.id}:`, error);
                    }
                }
                
                // Close modal
                const modal = document.getElementById('downloadModal');
                if (modal) {
                    modal.remove();
                    document.body.style.overflow = '';
                }
                
                // Show completion message
                if (typeof showToast === 'function') {
                    showToast(`${installed} ููุฑุฏ ุฏุฑ ุญุงู ูุตุจ ูุณุชูุฏ. ูพุณ ุงุฒ ุงุชูุงู ูุตุจุ ุฑู "ุจุฑุฑุณ ูุฌุฏุฏ" ฺฉูฺฉ ฺฉูุฏ.`, 'success');
                }
            },
            
            delay(ms) {
                return new Promise(resolve => setTimeout(resolve, ms));
            }
        };
        
        // ============================================
        // Initialize Everything
        // ============================================
        
        document.addEventListener('DOMContentLoaded', function() {
            // Guide Modal
            const openGuideBtn = document.getElementById('openGuideBtn');
            const openGuideBtn2 = document.getElementById('openGuideBtn2');
            const closeGuideBtn = document.getElementById('closeGuideModal');
            
            if (openGuideBtn) {
                openGuideBtn.addEventListener('click', openGuideModal);
            }
            if (openGuideBtn2) {
                openGuideBtn2.addEventListener('click', openGuideModal);
            }
            if (closeGuideBtn) {
                closeGuideBtn.addEventListener('click', closeGuideModal);
            }
            
            // Close modal on overlay click
            const guideModal = document.getElementById('guideModal');
            if (guideModal) {
                guideModal.addEventListener('click', function(e) {
                    if (e.target === guideModal) {
                        closeGuideModal();
                    }
                });
            }
            
            // Guide navigation
            document.querySelectorAll('.guide-nav-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    guideGoToSection(this.dataset.section);
                });
            });
            
            // System Check
            const checkBtn = document.getElementById('startSystemCheck');
            const installBtn = document.getElementById('installMissing');
            
            if (checkBtn) {
                checkBtn.addEventListener('click', function() {
                    PremiumSystemCheck.runCheck();
                });
            }
            
            if (installBtn) {
                installBtn.addEventListener('click', function() {
                    PremiumSystemCheck.startInstallation();
                });
            }
            
            // ESC key to close modals
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    closeGuideModal();
                    const downloadModal = document.getElementById('downloadModal');
                    if (downloadModal) {
                        downloadModal.remove();
                        document.body.style.overflow = '';
                    }
                }
            });
            
            // Auto-open guide if URL contains #guide
            if (window.location.hash === '#guide') {
                setTimeout(function() {
                    openGuideModal();
                }, 500);
            }
            
            // Listen for hash changes
            window.addEventListener('hashchange', function() {
                if (window.location.hash === '#guide') {
                    openGuideModal();
                }
            });
        });
    </script>
</body>
</html>
