<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ูพูู ฺฉุงุฑุจุฑ | OdooMaster</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;500;600;700;800;900&family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/animations.css">
    <link rel="stylesheet" href="css/dashboard.css">
    <link rel="stylesheet" href="css/dashboard-additions.css">
    <link rel="stylesheet" href="css/components.css">
    <script>
        // Apply theme immediately (dashboard styles + main.css variables rely on body.light-theme)
        if (localStorage.getItem('theme') === 'light') {
            document.documentElement.classList.add('light-theme');
        }
    </script>
</head>
<body class="dashboard-page">
    <script>
        if (localStorage.getItem('theme') === 'light') {
            document.body.classList.add('light-theme');
        }
    </script>
    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <a href="index.html" class="logo">
                <div class="logo-icon">
                    <i class="fas fa-cube"></i>
                </div>
                <span class="logo-text">Odoo<strong>Master</strong></span>
            </a>
            <button class="sidebar-toggle" id="sidebarToggle">
                <i class="fas fa-bars"></i>
            </button>
        </div>

        <nav class="sidebar-nav">
            <div class="nav-section">
                <span class="nav-section-title" data-i18n="dashboard.mainMenu">ููู ุงุตู</span>
                <a href="dashboard.html" class="nav-item active">
                    <i class="fas fa-home"></i>
                    <span data-i18n="dashboard.dashboard">ุฏุงุดุจูุฑุฏ</span>
                </a>
                <a href="#licenses" class="nav-item">
                    <i class="fas fa-key"></i>
                    <span data-i18n="nav.licenses">ูุงุณูุณโูุง</span>
                    <span class="nav-badge">ฒ</span>
                </a>
                <a href="#downloads" class="nav-item">
                    <i class="fas fa-download"></i>
                    <span data-i18n="nav.downloads">ุฏุงูููุฏูุง</span>
                </a>
                <a href="#" class="nav-item disabled-link" aria-disabled="true" tabindex="-1" title="ุจูโุฒูุฏ ูุนุงู ูโุดูุฏ">
                    <i class="fas fa-headset"></i>
                    <span data-i18n="nav.support">ูพุดุชุจุงู</span>
                </a>
            </div>

            <div class="nav-section">
                <span class="nav-section-title" data-i18n="dashboard.financial">ูุงู</span>
                <a href="#" class="nav-item disabled-link" aria-disabled="true" tabindex="-1" title="ุจูโุฒูุฏ ูุนุงู ูโุดูุฏ">
                    <i class="fas fa-file-invoice"></i>
                    <span data-i18n="dashboard.invoices">ูุงฺฉุชูุฑูุง</span>
                </a>
                <a href="#" class="nav-item disabled-link" aria-disabled="true" tabindex="-1" title="ุจูโุฒูุฏ ูุนุงู ูโุดูุฏ">
                    <i class="fas fa-wallet"></i>
                    <span data-i18n="dashboard.wallet">ฺฉู ูพูู</span>
                </a>
            </div>

            <div class="nav-section">
                <span class="nav-section-title" data-i18n="dashboard.account">ุญุณุงุจ ฺฉุงุฑุจุฑ</span>
                <a href="#" class="nav-item disabled-link" aria-disabled="true" tabindex="-1" title="ุจูโุฒูุฏ ูุนุงู ูโุดูุฏ">
                    <i class="fas fa-user"></i>
                    <span data-i18n="dashboard.profile">ูพุฑููุงู</span>
                </a>
                <a href="#" class="nav-item disabled-link" aria-disabled="true" tabindex="-1" title="ุจูโุฒูุฏ ูุนุงู ูโุดูุฏ">
                    <i class="fas fa-cog"></i>
                    <span data-i18n="dashboard.settings">ุชูุธูุงุช</span>
                </a>
            </div>

            <!-- Admin Section (Visible only for admins) -->
            <div class="nav-section" id="adminNavSection" style="display: none;">
                <span class="nav-section-title" data-i18n="dashboard.management">ูุฏุฑุช</span>
                <a href="#admin" class="nav-item admin-link" id="adminNavLink">
                    <i class="fas fa-shield-alt"></i>
                    <span data-i18n="dashboard.adminPanel">ูพูู ูุฏุฑุช</span>
                </a>
            </div>
        </nav>

        <div class="sidebar-footer">
            <div class="user-card">
                <div class="user-avatar">
                    <img src="https://ui-avatars.com/api/?name=ฺฉุงุฑุจุฑ+ุชุณุช&background=714B67&color=fff" alt="User">
                    <span class="status-dot online"></span>
                </div>
                <div class="user-info">
                    <strong>ฺฉุงุฑุจุฑ ุชุณุช</strong>
                    <span>ูพูู ุญุฑููโุง</span>
                </div>
                <button class="logout-btn" title="ุฎุฑูุฌ">
                    <i class="fas fa-sign-out-alt"></i>
                </button>
            </div>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Top Bar -->
        <header class="topbar">
            <div class="topbar-right">
                <button class="mobile-menu-btn" id="mobileMenuBtn">
                    <i class="fas fa-bars"></i>
                </button>
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" data-i18n-placeholder="dashboard.search" placeholder="Search...">
                </div>
            </div>
            <div class="topbar-left">
                <div class="lang-switcher-topbar" id="langSwitcherTopbar">
                    <!-- Language switcher will be inserted here by JS -->
                </div>
                <button class="topbar-btn" id="notifBtn">
                    <i class="fas fa-bell"></i>
                    <span class="notif-badge">3</span>
                </button>
                <button class="topbar-btn" id="themeBtn" title="Toggle Theme">
                    <i class="fas fa-moon"></i>
                </button>
            </div>
        </header>

        <!-- Dashboard Content -->
        <div class="dashboard-content">
            <!-- Welcome Banner - Enhanced -->
            <div class="welcome-banner glass">
                <div class="welcome-content">
                    <h1><span data-i18n="dashboard.hello">ุณูุงูุ</span> <span class="gradient-text" id="userName">ฺฉุงุฑุจุฑ ุนุฒุฒ</span> ๐</h1>
                    <p data-i18n="dashboard.welcomeText">ุจู ูพูู ฺฉุงุฑุจุฑ ุฎูุฏ ุฎูุด ุขูุฏุฏ! ุงุฒ ุงูุฌุง ูโุชูุงูุฏ ูุงุณูุณโูุงุ ุฏุงูููุฏูุง ู ุฏูู ุขููุงู ุฎูุฏ ุฑุง ูุฏุฑุช ฺฉูุฏ.</p>
                    <div class="welcome-actions">
                        <a href="#demo-section" class="btn btn-primary btn-sm">
                            <i class="fas fa-play-circle"></i>
                            <span>ุณุงุฎุช ุฏูู ุขููุงู</span>
                        </a>
                        <a href="docs.html" class="btn btn-outline btn-sm">
                            <i class="fas fa-book"></i>
                            <span>ุฑุงูููุง ฺฉุงุฑุจุฑ</span>
                        </a>
                    </div>
                </div>
                <div class="welcome-illustration">
                    <div class="illustration-circle"></div>
                    <i class="fas fa-rocket"></i>
                </div>
            </div>

            <!-- Stats Cards -->
            <div class="stats-grid">
                <div class="stat-card glass">
                    <div class="stat-icon blue">
                        <i class="fas fa-key"></i>
                    </div>
                    <div class="stat-info">
                        <span class="stat-value">ฒ</span>
                        <span class="stat-label" data-i18n="dashboard.activeLicenses">ูุงุณูุณ ูุนุงู</span>
                    </div>
                    <div class="stat-trend up">
                        <i class="fas fa-arrow-up"></i>
                        +ฑ
                    </div>
                </div>
                <div class="stat-card glass">
                    <div class="stat-icon green">
                        <i class="fas fa-download"></i>
                    </div>
                    <div class="stat-info">
                        <span class="stat-value">ต</span>
                        <span class="stat-label" data-i18n="dashboard.downloads">ุฏุงูููุฏ</span>
                    </div>
                    <div class="stat-trend up">
                        <i class="fas fa-arrow-up"></i>
                        +ฒ
                    </div>
                </div>
                <div class="stat-card glass">
                    <div class="stat-icon orange">
                        <i class="fas fa-clock"></i>
                    </div>
                    <div class="stat-info">
                        <span class="stat-value">ฒธ</span>
                        <span class="stat-label" data-i18n="dashboard.daysRemaining">ุฑูุฒ ุจุงููุงูุฏู</span>
                    </div>
                </div>
                <div class="stat-card glass">
                    <div class="stat-icon purple">
                        <i class="fas fa-headset"></i>
                    </div>
                    <div class="stat-info">
                        <span class="stat-value">ฑ</span>
                        <span class="stat-label" data-i18n="dashboard.openTickets">ุชฺฉุช ุจุงุฒ</span>
                    </div>
                </div>
            </div>

            <!-- Main Grid -->
            <div class="dashboard-grid">
                
                <!-- Online Demo Section - LIKE CHITALK -->
                <div class="card glass demo-section" id="demo-section" style="grid-column: 1 / -1;">
                    <div class="card-header">
                        <h3><i class="fas fa-rocket"></i> <span>ุฏูู ุขููุงู ุฑุงฺฏุงู - ฑด ุฑูุฒู</span></h3>
                        <span class="section-badge badge-new">ุฌุฏุฏ</span>
                    </div>
                    <div class="demo-content">
                        <div class="demo-info">
                            <p style="color: var(--text-secondary); margin-bottom: 20px;">
                                ฺฉ ูุณุฎู ฺฉุงูู ู ุงุฎุชุตุงุต Odoo ุจุง ุชูุงู ูุงฺููโูุง ุจุฑุง ุชุณุช ฑด ุฑูุฒู ุฑุงฺฏุงู ุจุณุงุฒุฏ. 
                                ุฏุงุฏูโูุง ูุงูุน ุฎูุฏ ุฑุง ุงูุชุญุงู ฺฉูุฏ ู ุชุฌุฑุจู ฺฉุงูู ุณุณุชู ุฑุง ุฏุงุดุชู ุจุงุดุฏ.
                            </p>
                            <div class="demo-features">
                                <div class="demo-feature-item">
                                    <i class="fas fa-check-circle"></i>
                                    <span>ุชูุงู ูุงฺููโูุง Odoo 19</span>
                                </div>
                                <div class="demo-feature-item">
                                    <i class="fas fa-check-circle"></i>
                                    <span>ุฏุชุงุจุณ ุงุฎุชุตุงุต ุดูุง</span>
                                </div>
                                <div class="demo-feature-item">
                                    <i class="fas fa-check-circle"></i>
                                    <span>ูพุดุชุจุงู ูู ุฑุงฺฏุงู</span>
                                </div>
                                <div class="demo-feature-item">
                                    <i class="fas fa-check-circle"></i>
                                    <span>ฑด ุฑูุฒ ุฑุงฺฏุงู - ุจุฏูู ูุงุฒ ุจู ฺฉุงุฑุช ุจุงูฺฉ</span>
                                </div>
                            </div>
                        </div>
                        <div class="demo-instances" id="demoInstances">
                            <div class="instances-header">
                                <h4>ุฏูููุง ูุนุงู ุดูุง</h4>
                                <span class="instances-count">ฐ ุงุฒ ณ</span>
                            </div>
                            <div class="instances-list" id="instancesList">
                                <div class="no-instances">
                                    <i class="fas fa-box-open"></i>
                                    <p>ูููุฒ ุฏูู ูุฏุงุฑุฏ</p>
                                    <small>ุงููู ุฏูู ุขููุงู ุฎูุฏ ุฑุง ุจุณุงุฒุฏ</small>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="demo-action" style="margin-top: 24px; text-align: center;">
                        <button class="btn btn-primary btn-glow btn-lg" id="createDemoBtn">
                            <i class="fas fa-plus-circle"></i>
                            <span>ุณุงุฎุช ุฏูู ุขููุงู ุฑุงฺฏุงู</span>
                        </button>
                    </div>
                </div>

                <!-- System Check & Install Section (NEW) -->
                <div class="card glass system-check-card" style="grid-column: 1 / -1;">
                    <div class="card-header">
                        <h3><i class="fas fa-stethoscope"></i> <span data-i18n="dashboard.systemCheck">ุชุณุช ุณุณุชู ู ูุตุจ ูุงุฒููุฏโูุง</span></h3>
                        <span class="section-badge" id="systemStatus" data-i18n="dashboard.readyToTest">ุขูุงุฏู ุชุณุช</span>
                    </div>
                    <p style="color: var(--text-secondary); margin-bottom: 20px;" data-i18n="dashboard.systemCheckDesc">
                        ูุจู ุงุฒ ูุตุจ Odooุ ุณุณุชู ุดูุง ุจุฑุฑุณ ูโุดูุฏ ู ูุงุฒููุฏโูุง ูุงููุฌูุฏ ุงุฒ ููุงุจุน ุฑุณู ุฏุงูููุฏ ู ูุตุจ ูโุดููุฏ.
                    </p>
                    <div class="system-check-grid" id="systemCheckGrid">
                        <div class="check-item" data-check="os">
                            <div class="check-icon"><i class="fas fa-desktop"></i></div>
                            <div class="check-info">
                                <h4>ุณุณุชู ุนุงูู</h4>
                                <p>Windows 10/11 64-bit</p>
                            </div>
                            <span class="check-status">ุฏุฑ ุงูุชุธุงุฑ...</span>
                        </div>
                        <div class="check-item" data-check="python">
                            <div class="check-icon"><i class="fab fa-python"></i></div>
                            <div class="check-info">
                                <h4>Python 3.11</h4>
                                <p>ุฏุงูููุฏ ุงุฒ python.org</p>
                            </div>
                            <span class="check-status">ุฏุฑ ุงูุชุธุงุฑ...</span>
                        </div>
                        <div class="check-item" data-check="postgresql">
                            <div class="check-icon"><i class="fas fa-database"></i></div>
                            <div class="check-info">
                                <h4>PostgreSQL 16</h4>
                                <p>ุฏุงูููุฏ ุงุฒ postgresql.org</p>
                            </div>
                            <span class="check-status">ุฏุฑ ุงูุชุธุงุฑ...</span>
                        </div>
                        <div class="check-item" data-check="git">
                            <div class="check-icon"><i class="fab fa-git-alt"></i></div>
                            <div class="check-info">
                                <h4>Git</h4>
                                <p>ุฏุงูููุฏ ุงุฒ git-scm.com</p>
                            </div>
                            <span class="check-status">ุฏุฑ ุงูุชุธุงุฑ...</span>
                        </div>
                        <div class="check-item" data-check="nodejs">
                            <div class="check-icon"><i class="fab fa-node-js"></i></div>
                            <div class="check-info">
                                <h4>Node.js LTS</h4>
                                <p>ุฏุงูููุฏ ุงุฒ nodejs.org</p>
                            </div>
                            <span class="check-status">ุฏุฑ ุงูุชุธุงุฑ...</span>
                        </div>
                        <div class="check-item" data-check="vcredist">
                            <div class="check-icon"><i class="fas fa-cogs"></i></div>
                            <div class="check-info">
                                <h4>VC++ Redistributable</h4>
                                <p>ุฏุงูููุฏ ุงุฒ microsoft.com</p>
                            </div>
                            <span class="check-status">ุฏุฑ ุงูุชุธุงุฑ...</span>
                        </div>
                    </div>
                    <div class="action-buttons" style="margin-top: 24px; display: flex; gap: 12px; justify-content: center;">
                        <button class="btn btn-primary btn-glow" id="startSystemCheck">
                            <i class="fas fa-search"></i>
                            <span data-i18n="dashboard.startSystemCheck">ุดุฑูุน ุจุฑุฑุณ ุณุณุชู</span>
                        </button>
                        <button class="btn btn-outline" id="installMissing" style="display: none;">
                            <i class="fas fa-download"></i>
                            <span data-i18n="dashboard.installMissing">ูุตุจ ูุงุฒููุฏโูุง</span>
                        </button>
                    </div>
                </div>

                <!-- Quick Actions -->
                <div class="card glass quick-actions">
                    <div class="card-header">
                        <h3><i class="fas fa-bolt"></i> <span data-i18n="dashboard.quickAccess">ุฏุณุชุฑุณ ุณุฑุน</span></h3>
                    </div>
                    <div class="actions-grid">
                        <a href="#downloads" class="action-btn">
                            <div class="action-icon blue">
                                <i class="fas fa-download"></i>
                            </div>
                            <span data-i18n="dashboard.downloadInstaller">ุฏุงูููุฏ ูุตุงุจ</span>
                        </a>
                        <a href="#licenses" class="action-btn">
                            <div class="action-icon green">
                                <i class="fas fa-plus"></i>
                            </div>
                            <span data-i18n="dashboard.buyLicense">ุฎุฑุฏ ูุงุณูุณ</span>
                        </a>
                        <a href="#" class="action-btn disabled-link" aria-disabled="true" tabindex="-1" title="ุจูโุฒูุฏ ูุนุงู ูโุดูุฏ">
                            <div class="action-icon orange">
                                <i class="fas fa-comment-dots"></i>
                            </div>
                            <span data-i18n="dashboard.sendTicket">ุงุฑุณุงู ุชฺฉุช</span>
                        </a>
                        <a href="#" class="action-btn">
                            <div class="action-icon purple">
                                <i class="fas fa-book"></i>
                            </div>
                            <span data-i18n="dashboard.documentation">ูุณุชูุฏุงุช</span>
                        </a>
                    </div>
                </div>

                <!-- Active Licenses -->
                <div class="card glass licenses-card" id="licenses">
                    <div class="card-header">
                        <h3><i class="fas fa-key"></i> <span data-i18n="dashboard.activeLicensesTitle">ูุงุณูุณโูุง ูุนุงู</span></h3>
                        <a href="#licenses" class="card-link" data-i18n="dashboard.viewAll">ูุดุงูุฏู ููู</a>
                    </div>
                    <div class="licenses-list">
                        <div class="license-item">
                            <div class="license-info">
                                <div class="license-icon pro">
                                    <i class="fas fa-gem"></i>
                                </div>
                                <div class="license-details">
                                    <strong>ูพูู ุญุฑููโุง</strong>
                                    <span>XXXX-XXXX-XXXX-1234</span>
                                </div>
                            </div>
                            <div class="license-status">
                                <span class="status-badge active">ูุนุงู</span>
                                <span class="expiry">ฒธ ุฑูุฒ ูุงูุฏู</span>
                            </div>
                            <div class="license-actions">
                                <button class="icon-btn" title="ฺฉูพ ฺฉูุฏ">
                                    <i class="fas fa-copy"></i>
                                </button>
                                <button class="icon-btn" title="ุฌุฒุฆุงุช">
                                    <i class="fas fa-info-circle"></i>
                                </button>
                            </div>
                        </div>
                        <div class="license-item">
                            <div class="license-info">
                                <div class="license-icon starter">
                                    <i class="fas fa-seedling"></i>
                                </div>
                                <div class="license-details">
                                    <strong>ูพูู ุฑุงฺฏุงู</strong>
                                    <span>XXXX-XXXX-XXXX-5678</span>
                                </div>
                            </div>
                            <div class="license-status">
                                <span class="status-badge active">ูุนุงู</span>
                                <span class="expiry">ุจุฏูู ุงููุถุง</span>
                            </div>
                            <div class="license-actions">
                                <button class="icon-btn" title="ฺฉูพ ฺฉูุฏ">
                                    <i class="fas fa-copy"></i>
                                </button>
                                <button class="icon-btn" title="ุงุฑุชูุง">
                                    <i class="fas fa-arrow-up"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Admin Panel (Embedded) -->
                <div class="card glass" id="admin" style="display: none; padding: 0; overflow: hidden;">
                    <div class="card-header" style="padding: 18px 18px 0 18px; margin-bottom: 12px;">
                        <h3><i class="fas fa-shield-alt"></i> ูพูู ูุฏุฑุช</h3>
                        <a href="#" class="card-link" id="closeAdminPanel">ุจุณุชู</a>
                    </div>
                    <div style="padding: 0 18px 18px 18px;">
                        <iframe
                            id="adminPanelFrame"
                            title="Admin Panel"
                            src="admin.html"
                            style="width: 100%; height: 75vh; border: 0; border-radius: 14px; background: transparent;"
                            loading="lazy"
                        ></iframe>
                    </div>
                </div>

                <!-- Download Section -->
                <div class="card glass download-card" id="downloads">
                    <div class="card-header">
                        <h3><i class="fas fa-download"></i> <span data-i18n="dashboard.downloadInstaller">ุฏุงูููุฏ ูุตุงุจ</span></h3>
                    </div>
                    <div class="download-content">
                        <div class="download-info">
                            <div class="download-icon">
                                <i class="fas fa-cube"></i>
                            </div>
                            <div class="download-details">
                                <strong>OdooMaster Installer v2.0</strong>
                                <span>Windows 64-bit โข 520 MB</span>
                            </div>
                        </div>
                        <div class="download-meta">
                            <div class="meta-item">
                                <i class="fas fa-calendar"></i>
                                <span data-i18n="dashboard.lastUpdate">ุขุฎุฑู ุจุฑูุฒุฑุณุงู:</span> 2025/01/05
                            </div>
                            <div class="meta-item">
                                <i class="fas fa-code-branch"></i>
                                Odoo 19 Community
                            </div>
                        </div>
                        <button class="btn btn-primary btn-block btn-glow download-btn" id="downloadBtn">
                            <i class="fas fa-download"></i>
                            <span data-i18n="dashboard.downloadInstaller">ุฏุงูููุฏ ูุตุงุจ</span>
                        </button>
                        <div class="download-progress" id="downloadProgress">
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 0%"></div>
                            </div>
                            <span class="progress-text" data-i18n="dashboard.preparing">ุฏุฑ ุญุงู ุขูุงุฏูโุณุงุฒ...</span>
                        </div>
                    </div>
                </div>

                <!-- Recent Activity -->
                <div class="card glass activity-card">
                    <div class="card-header">
                        <h3><i class="fas fa-history"></i> <span data-i18n="dashboard.recentActivity">ูุนุงูุชโูุง ุงุฎุฑ</span></h3>
                    </div>
                    <div class="activity-list">
                        <div class="activity-item">
                            <div class="activity-icon green">
                                <i class="fas fa-check"></i>
                            </div>
                            <div class="activity-content">
                                <strong>ูุงุณูุณ ูุนุงู ุดุฏ</strong>
                                <span>ูพูู ุญุฑููโุง ุจุง ููููุช ูุนุงู ุดุฏ</span>
                            </div>
                            <span class="activity-time">ฒ ุณุงุนุช ูพุด</span>
                        </div>
                        <div class="activity-item">
                            <div class="activity-icon blue">
                                <i class="fas fa-download"></i>
                            </div>
                            <div class="activity-content">
                                <strong>ุฏุงูููุฏ ูุตุงุจ</strong>
                                <span>ูุณุฎู ฒ.ฐ ุฏุงูููุฏ ุดุฏ</span>
                            </div>
                            <span class="activity-time">ุฏุฑูุฒ</span>
                        </div>
                        <div class="activity-item">
                            <div class="activity-icon orange">
                                <i class="fas fa-credit-card"></i>
                            </div>
                            <div class="activity-content">
                                <strong>ูพุฑุฏุงุฎุช ูููู</strong>
                                <span>ดนฐ,ฐฐฐ ุชููุงู</span>
                            </div>
                            <span class="activity-time">ณ ุฑูุฒ ูพุด</span>
                        </div>
                    </div>
                </div>

                <!-- Support Tickets Section - NEW -->
                <div class="card glass tickets-card">
                    <div class="card-header">
                        <h3><i class="fas fa-ticket-alt"></i> <span>ุชฺฉุชโูุง ูพุดุชุจุงู</span></h3>
                        <button class="card-btn" id="newTicketBtn">
                            <i class="fas fa-plus"></i>
                            <span>ุชฺฉุช ุฌุฏุฏ</span>
                        </button>
                    </div>
                    <div class="tickets-list">
                        <div class="ticket-item">
                            <div class="ticket-status open">
                                <i class="fas fa-circle"></i>
                            </div>
                            <div class="ticket-content">
                                <strong>ูุดฺฉู ุฏุฑ ูุตุจ PostgreSQL</strong>
                                <span>ุชฺฉุช #1234 โข ูพุงุณุฎ: ฒ</span>
                            </div>
                            <div class="ticket-meta">
                                <span class="ticket-time">ฒ ุณุงุนุช ูพุด</span>
                                <span class="ticket-badge open">ุจุงุฒ</span>
                            </div>
                        </div>
                        <div class="ticket-item">
                            <div class="ticket-status answered">
                                <i class="fas fa-check-circle"></i>
                            </div>
                            <div class="ticket-content">
                                <strong>ุณูุงู ุฏุฑุจุงุฑู ูุงฺููโูุง ุงุฑุงู</strong>
                                <span>ุชฺฉุช #1233 โข ูพุงุณุฎ: ด</span>
                            </div>
                            <div class="ticket-meta">
                                <span class="ticket-time">ุฏุฑูุฒ</span>
                                <span class="ticket-badge answered">ูพุงุณุฎ ุฏุงุฏู ุดุฏู</span>
                            </div>
                        </div>
                    </div>
                    <div style="margin-top: 16px; text-align: center;">
                        <a href="#" class="text-link">ูุดุงูุฏู ููู ุชฺฉุชโูุง โ</a>
                    </div>
                </div>
            </div>

            <!-- Gamification Section -->
            <div class="gamification-section">
                <div class="card glass achievements-card">
                    <div class="card-header">
                        <h3><i class="fas fa-trophy"></i> <span data-i18n="dashboard.achievements">ุฏุณุชุงูุฑุฏูุง</span></h3>
                        <span class="achievement-count">3/12</span>
                    </div>
                    <div class="achievements-grid">
                        <div class="achievement unlocked">
                            <div class="achievement-icon">
                                <i class="fas fa-user-plus"></i>
                            </div>
                            <span data-i18n="dashboard.firstStep">ุงููู ูุฏู</span>
                        </div>
                        <div class="achievement unlocked">
                            <div class="achievement-icon">
                                <i class="fas fa-download"></i>
                            </div>
                            <span data-i18n="dashboard.firstDownload">ุงููู ุฏุงูููุฏ</span>
                        </div>
                        <div class="achievement unlocked">
                            <div class="achievement-icon">
                                <i class="fas fa-key"></i>
                            </div>
                            <span data-i18n="dashboard.licenseHolder">ูุงุณูุณโุฏุงุฑ</span>
                        </div>
                        <div class="achievement locked">
                            <div class="achievement-icon">
                                <i class="fas fa-star"></i>
                            </div>
                            <span>VIP</span>
                        </div>
                        <div class="achievement locked">
                            <div class="achievement-icon">
                                <i class="fas fa-users"></i>
                            </div>
                            <span data-i18n="dashboard.referrer">ูุนุฑู</span>
                        </div>
                        <div class="achievement locked">
                            <div class="achievement-icon">
                                <i class="fas fa-crown"></i>
                            </div>
                            <span data-i18n="dashboard.legendary">ุงูุณุงููโุง</span>
                        </div>
                    </div>
                </div>

                <div class="card glass level-card">
                    <div class="level-header">
                        <div class="level-badge">
                            <i class="fas fa-medal"></i>
                            <span><span data-i18n="dashboard.level">ุณุทุญ</span> 3</span>
                        </div>
                        <div class="xp-info">
                            <strong>750 XP</strong>
                            <span><span data-i18n="dashboard.toNextLevel">ุชุง ุณุทุญ ุจุนุฏ:</span> 250 XP</span>
                        </div>
                    </div>
                    <div class="level-progress">
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 75%"></div>
                        </div>
                    </div>
                    <div class="level-rewards">
                        <span data-i18n="dashboard.nextLevelReward">ูพุงุฏุงุด ุณุทุญ ุจุนุฏ:</span>
                        <div class="reward-preview">
                            <i class="fas fa-gift"></i>
                            <span data-i18n="dashboard.discount10">10% ุชุฎูู ุฎุฑุฏ ุจุนุฏ</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Notification Panel -->
    <div class="notification-panel" id="notifPanel">
        <div class="notif-header">
            <h4 data-i18n="dashboard.notifications">ุงุนูุงูโูุง</h4>
            <button class="mark-read" data-i18n="dashboard.markAllRead">ููู ุฎูุงูุฏู ุดุฏ</button>
        </div>
        <div class="notif-list">
            <div class="notif-item unread">
                <div class="notif-icon green">
                    <i class="fas fa-check-circle"></i>
                </div>
                <div class="notif-content">
                    <strong>ูุตุจ ูููู!</strong>
                    <p>Odoo ุจุง ููููุช ูุตุจ ุดุฏ</p>
                    <span class="notif-time">ต ุฏููู ูพุด</span>
                </div>
            </div>
            <div class="notif-item unread">
                <div class="notif-icon blue">
                    <i class="fas fa-gift"></i>
                </div>
                <div class="notif-content">
                    <strong>ูุฏู ูฺู!</strong>
                    <p>ท ุฑูุฒ ุงุดุชุฑุงฺฉ ุฑุงฺฏุงู ูุนุงู ุดุฏ</p>
                    <span class="notif-time">ฑ ุณุงุนุช ูพุด</span>
                </div>
            </div>
            <div class="notif-item">
                <div class="notif-icon orange">
                    <i class="fas fa-sync"></i>
                </div>
                <div class="notif-content">
                    <strong>ุจุฑูุฒุฑุณุงู ุฌุฏุฏ</strong>
                    <p>ูุณุฎู ฒ.ฑ ููุชุดุฑ ุดุฏ</p>
                    <span class="notif-time">ุฏุฑูุฒ</span>
                </div>
            </div>
        </div>
    </div>

    <script src="js/i18n.js"></script>
    <script src="js/api.js"></script>
    <script src="js/main.js"></script>
    <script src="js/installer.js"></script>
    <script src="js/demo-manager.js"></script>
    <script src="js/dashboard.js"></script>
    <script>
        // Load real user data from API
        (async function loadDashboardData() {
            const token = localStorage.getItem('authToken');
            
            // DEMO MODE: If no token, use demo data instead of redirecting
            if (!token) {
                console.log('๐จ Demo Mode: No auth token found, using demo data');
                loadDemoData();
                return;
            }

            try {
                const res = await API.getMe();
                if (!res || !res.user) {
                    localStorage.removeItem('authToken');
                    window.location.href = 'login.html?redirect=dashboard.html';
                    return;
                }

                const user = res.user;
                const licenses = res.licenses || [];
                const stats = res.stats || {};

                // Update user name in welcome banner
                const welcomeTitle = document.querySelector('.welcome-content h1');
                if (welcomeTitle) {
                    welcomeTitle.innerHTML = `ุณูุงูุ <span class="gradient-text">${user.name || 'ฺฉุงุฑุจุฑ'}</span> ๐`;
                }

                // Update sidebar user card
                const userCard = document.querySelector('.user-card');
                if (userCard) {
                    const avatar = userCard.querySelector('.user-avatar img');
                    const nameEl = userCard.querySelector('.user-info strong');
                    const planEl = userCard.querySelector('.user-info span');
                    
                    if (avatar) avatar.src = `https://ui-avatars.com/api/?name=${encodeURIComponent(user.name || 'User')}&background=714B67&color=fff`;
                    if (nameEl) nameEl.textContent = user.name || 'ฺฉุงุฑุจุฑ';
                    
                    // Find active plan
                    const activeLicense = licenses.find(l => l.status === 'active');
                    if (planEl) planEl.textContent = activeLicense ? (activeLicense.plan || 'ูพูู ุฑุงฺฏุงู') : 'ุจุฏูู ูพูู';
                }

                // Update stats cards
                const statCards = document.querySelectorAll('.stat-card');
                if (statCards.length >= 4) {
                    // Active licenses
                    const licenseValue = statCards[0].querySelector('.stat-value');
                    if (licenseValue) licenseValue.textContent = toPersianNum(stats.active_licenses || 0);

                    // Downloads
                    const downloadValue = statCards[1].querySelector('.stat-value');
                    if (downloadValue) downloadValue.textContent = toPersianNum(stats.total_downloads || 0);

                    // Days remaining (find soonest expiring license)
                    const daysValue = statCards[2].querySelector('.stat-value');
                    if (daysValue) {
                        const activeLicenses = licenses.filter(l => l.status === 'active' && l.expires_at);
                        let minDays = null;
                        activeLicenses.forEach(l => {
                            const exp = new Date(l.expires_at);
                            const now = new Date();
                            const days = Math.ceil((exp - now) / (1000 * 60 * 60 * 24));
                            if (days > 0 && (minDays === null || days < minDays)) minDays = days;
                        });
                        daysValue.textContent = minDays !== null ? toPersianNum(minDays) : 'โ';
                    }

                    // Open tickets (placeholder - would need tickets API)
                    const ticketValue = statCards[3].querySelector('.stat-value');
                    if (ticketValue) ticketValue.textContent = toPersianNum(0);
                }

                // Update licenses list
                const licensesList = document.querySelector('.licenses-list');
                if (licensesList && licenses.length > 0) {
                    licensesList.innerHTML = licenses.slice(0, 3).map(lic => {
                        const isPro = (lic.plan || '').toLowerCase().includes('pro') || (lic.plan || '').includes('ุญุฑูู');
                        const iconClass = isPro ? 'pro' : 'starter';
                        const icon = isPro ? 'fa-gem' : 'fa-seedling';
                        const planName = lic.plan || 'ูพูู ุฑุงฺฏุงู';
                        const keyDisplay = lic.key ? lic.key.substring(0, 4) + '-XXXX-XXXX-' + lic.key.slice(-4) : 'โ';
                        
                        let expiryText = 'ุจุฏูู ุงููุถุง';
                        if (lic.expires_at) {
                            const exp = new Date(lic.expires_at);
                            const now = new Date();
                            const days = Math.ceil((exp - now) / (1000 * 60 * 60 * 24));
                            expiryText = days > 0 ? toPersianNum(days) + ' ุฑูุฒ ูุงูุฏู' : 'ูููุถ ุดุฏู';
                        }

                        return `
                            <div class="license-item">
                                <div class="license-info">
                                    <div class="license-icon ${iconClass}">
                                        <i class="fas ${icon}"></i>
                                    </div>
                                    <div class="license-details">
                                        <strong>${planName}</strong>
                                        <span>${keyDisplay}</span>
                                    </div>
                                </div>
                                <div class="license-status">
                                    <span class="status-badge ${lic.status === 'active' ? 'active' : 'expired'}">${lic.status === 'active' ? 'ูุนุงู' : 'ุบุฑูุนุงู'}</span>
                                    <span class="expiry">${expiryText}</span>
                                </div>
                                <div class="license-actions">
                                    <button class="icon-btn" title="ฺฉูพ ฺฉูุฏ" onclick="navigator.clipboard.writeText('${lic.key || ''}')">
                                        <i class="fas fa-copy"></i>
                                    </button>
                                    <button class="icon-btn" title="ุฌุฒุฆุงุช">
                                        <i class="fas fa-info-circle"></i>
                                    </button>
                                </div>
                            </div>
                        `;
                    }).join('');
                } else if (licensesList) {
                    licensesList.innerHTML = '<p style="text-align:center; color: var(--text-secondary); padding: 20px;">ูฺ ูุงุณูุณ ูุฏุงุฑุฏ. <a href="payment.html">ุฎุฑุฏ ฺฉูุฏ</a></p>';
                }

                // Update sidebar license badge
                const licenseBadge = document.querySelector('.nav-item[href="#licenses"] .nav-badge') || document.querySelector('.nav-item[href="licenses.html"] .nav-badge');
                if (licenseBadge) licenseBadge.textContent = toPersianNum(stats.active_licenses || 0);

                // Update XP/Level card
                const levelBadge = document.querySelector('.level-badge span');
                if (levelBadge) levelBadge.textContent = 'ุณุทุญ ' + toPersianNum(user.level || 1);

                const xpInfo = document.querySelector('.xp-info strong');
                if (xpInfo) xpInfo.textContent = toPersianNum(user.xp || 0) + ' XP';

            } catch (err) {
                console.error('Failed to load dashboard data:', err);
            }
        })();

        function loadDemoData() {
            // Demo user data
            const demoUser = {
                name: 'ฺฉุงุฑุจุฑ ุฏูู',
                email: 'demo@odoomaster.com',
                level: 3,
                xp: 750
            };

            const demoLicenses = [
                {
                    id: 1,
                    plan: 'ูพูู ุญุฑููโุง',
                    key: 'DEMO-1234-5678-ABCD',
                    status: 'active',
                    expires_at: new Date(Date.now() + 28 * 24 * 60 * 60 * 1000).toISOString()
                },
                {
                    id: 2,
                    plan: 'ูพูู ุฑุงฺฏุงู',
                    key: 'FREE-0000-0000-XXXX',
                    status: 'active',
                    expires_at: null
                }
            ];

            const demoStats = {
                active_licenses: 2,
                total_downloads: 5,
                open_tickets: 1
            };

            // Update UI with demo data
            updateDashboardUI(demoUser, demoLicenses, demoStats);
        }

        function updateDashboardUI(user, licenses, stats) {
            // Update user name in welcome banner
            const welcomeTitle = document.querySelector('.welcome-content h1');
            if (welcomeTitle) {
                welcomeTitle.innerHTML = `<span data-i18n="dashboard.hello">ุณูุงูุ</span> <span class="gradient-text">${user.name || 'ฺฉุงุฑุจุฑ'}</span> ๐`;
            }

            // Update sidebar user card
            const userCard = document.querySelector('.user-card');
            if (userCard) {
                const avatar = userCard.querySelector('.user-avatar img');
                const nameEl = userCard.querySelector('.user-info strong');
                const planEl = userCard.querySelector('.user-info span');
                
                if (avatar) avatar.src = `https://ui-avatars.com/api/?name=${encodeURIComponent(user.name || 'User')}&background=714B67&color=fff`;
                if (nameEl) nameEl.textContent = user.name || 'ฺฉุงุฑุจุฑ';
                
                const activeLicense = licenses.find(l => l.status === 'active');
                if (planEl) planEl.textContent = activeLicense ? (activeLicense.plan || 'ูพูู ุฑุงฺฏุงู') : 'ุจุฏูู ูพูู';
            }

            // Update stats cards
            const statCards = document.querySelectorAll('.stat-card');
            if (statCards.length >= 4) {
                const licenseValue = statCards[0].querySelector('.stat-value');
                if (licenseValue) licenseValue.textContent = toPersianNum(stats.active_licenses || 0);

                const downloadValue = statCards[1].querySelector('.stat-value');
                if (downloadValue) downloadValue.textContent = toPersianNum(stats.total_downloads || 0);

                const daysValue = statCards[2].querySelector('.stat-value');
                if (daysValue) {
                    const activeLicenses = licenses.filter(l => l.status === 'active' && l.expires_at);
                    let minDays = null;
                    activeLicenses.forEach(l => {
                        const exp = new Date(l.expires_at);
                        const now = new Date();
                        const days = Math.ceil((exp - now) / (1000 * 60 * 60 * 24));
                        if (days > 0 && (minDays === null || days < minDays)) minDays = days;
                    });
                    daysValue.textContent = minDays !== null ? toPersianNum(minDays) : 'โ';
                }

                const ticketValue = statCards[3].querySelector('.stat-value');
                if (ticketValue) ticketValue.textContent = toPersianNum(stats.open_tickets || 0);
            }

            // Update licenses list
            const licensesList = document.querySelector('.licenses-list');
            if (licensesList && licenses.length > 0) {
                licensesList.innerHTML = licenses.slice(0, 3).map(lic => {
                    const isPro = (lic.plan || '').toLowerCase().includes('pro') || (lic.plan || '').includes('ุญุฑูู');
                    const iconClass = isPro ? 'pro' : 'starter';
                    const icon = isPro ? 'fa-gem' : 'fa-seedling';
                    const planName = lic.plan || 'ูพูู ุฑุงฺฏุงู';
                    const keyDisplay = lic.key ? lic.key.substring(0, 4) + '-XXXX-XXXX-' + lic.key.slice(-4) : 'โ';
                    
                    let expiryText = 'ุจุฏูู ุงููุถุง';
                    if (lic.expires_at) {
                        const exp = new Date(lic.expires_at);
                        const now = new Date();
                        const days = Math.ceil((exp - now) / (1000 * 60 * 60 * 24));
                        expiryText = days > 0 ? toPersianNum(days) + ' ุฑูุฒ ูุงูุฏู' : 'ูููุถ ุดุฏู';
                    }

                    return `
                        <div class="license-item">
                            <div class="license-info">
                                <div class="license-icon ${iconClass}">
                                    <i class="fas ${icon}"></i>
                                </div>
                                <div class="license-details">
                                    <strong>${planName}</strong>
                                    <span>${keyDisplay}</span>
                                </div>
                            </div>
                            <div class="license-status">
                                <span class="status-badge ${lic.status === 'active' ? 'active' : 'expired'}">${lic.status === 'active' ? 'ูุนุงู' : 'ุบุฑูุนุงู'}</span>
                                <span class="expiry">${expiryText}</span>
                            </div>
                            <div class="license-actions">
                                <button class="icon-btn" title="ฺฉูพ ฺฉูุฏ" onclick="navigator.clipboard.writeText('${lic.key || ''}')">
                                    <i class="fas fa-copy"></i>
                                </button>
                                <button class="icon-btn" title="ุฌุฒุฆุงุช">
                                    <i class="fas fa-info-circle"></i>
                                </button>
                            </div>
                        </div>
                    `;
                }).join('');
            }

            // Update sidebar license badge
            const licenseBadge = document.querySelector('.nav-item[href="#licenses"] .nav-badge');
            if (licenseBadge) licenseBadge.textContent = toPersianNum(stats.active_licenses || 0);

            // Update XP/Level
            const levelBadge = document.querySelector('.level-badge span');
            if (levelBadge) levelBadge.innerHTML = '<span data-i18n="dashboard.level">ุณุทุญ</span> ' + toPersianNum(user.level || 1);

            const xpInfo = document.querySelector('.xp-info strong');
            if (xpInfo) xpInfo.textContent = toPersianNum(user.xp || 0) + ' XP';
        }

        function toPersianNum(num) {
            const persianDigits = 'ฐฑฒณดตถทธน';
            return String(num).replace(/\d/g, d => persianDigits[d]);
        }

        // System Check Integration
        document.addEventListener('DOMContentLoaded', function() {
            const checkBtn = document.getElementById('startSystemCheck');
            const installBtn = document.getElementById('installMissing');
            const statusBadge = document.getElementById('systemStatus');
            
            if (checkBtn) {
                checkBtn.addEventListener('click', async function() {
                    checkBtn.disabled = true;
                    checkBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> ุฏุฑ ุญุงู ุจุฑุฑุณ...';
                    statusBadge.textContent = 'ุฏุฑ ุญุงู ุจุฑุฑุณ...';
                    statusBadge.style.background = 'var(--primary)';
                    statusBadge.style.color = 'white';
                    
                    // Run system check
                    await OnlineInstaller.checkSystem();
                    
                    // Update UI based on results
                    const results = OnlineInstaller.state.checkResults;
                    const grid = document.getElementById('systemCheckGrid');
                    
                    for (const [name, result] of Object.entries(results)) {
                        const item = grid.querySelector(`[data-check="${name}"]`);
                        if (item) {
                            item.classList.remove('checking', 'success', 'warning', 'error');
                            item.classList.add(result.status);
                            item.querySelector('.check-status').textContent = 
                                result.installed ? result.version : (result.message || 'ูุตุจ ูุดุฏู');
                        }
                    }
                    
                    // Show install button if needed
                    if (OnlineInstaller.state.installQueue.length > 0) {
                        installBtn.style.display = 'inline-flex';
                        statusBadge.textContent = `${OnlineInstaller.state.installQueue.length} ููุฑุฏ ูุงุฒ ุจู ูุตุจ`;
                        statusBadge.style.background = '#ff5f57';
                    } else {
                        statusBadge.textContent = 'ุขูุงุฏู ูุตุจ Odoo โ';
                        statusBadge.style.background = '#28ca42';
                    }
                    
                    checkBtn.disabled = false;
                    checkBtn.innerHTML = '<i class="fas fa-redo"></i> ุจุฑุฑุณ ูุฌุฏุฏ';
                });
            }
            
            if (installBtn) {
                installBtn.addEventListener('click', function() {
                    // Show download links for missing items
                    const queue = OnlineInstaller.state.installQueue;
                    let message = 'ููฺฉโูุง ุฏุงูููุฏ ุฑุณู:\\n\\n';
                    
                    queue.forEach(item => {
                        message += `${item.name} (${item.size}):\\n${item.url}\\n\\n`;
                    });
                    
                    message += 'ูพุณ ุงุฒ ูุตุจุ ุฏฺฉูู "ุจุฑุฑุณ ูุฌุฏุฏ" ุฑุง ุจุฒูุฏ.';
                    
                    // Open first download
                    if (queue.length > 0) {
                        window.open(queue[0].url, '_blank');
                    }
                    
                    alert(message);
                });
            }
        });
    </script>
</body>
</html>
